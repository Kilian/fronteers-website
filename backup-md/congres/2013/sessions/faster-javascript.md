<!DOCTYPE html>
<!-- Handcrafted with ❤️, by Krijn -->
<html lang="nl">
 <head>
  <meta charset="utf-8">
  <title>Faster JavaScript web apps by Alex MacCaw · Fronteers</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="/_css/fronteers.css?v=2023">
  <link rel="icon" href="/favicon.ico">
  <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/FronteersWeblog" title="Fronteers weblog">
  <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/FronteersWeblogLaatsteReacties" title="Fronteers weblog: laatste reacties">
  <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/FronteersBijeenkomsten" title="Fronteers bijeenkomsten">
  <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/FronteersVacaturebank" title="Fronteers vacaturebank">
  <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/FronteersWorkshops" title="Fronteers workshops">
  <link rel="me" href="https://front-end.social/@fronteers">
  <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/FronteersCongres" title="Fronteers conference">
  <link rel="shortlink" href="http://frnt.rs/p1012">
 </head>
 <body id="fronteers-nl">

  <div id="container">
   <div id="main">
    <h1><a href="/"><img src="/_img/badges/fronteers-logo-300dpi.png" width="300" height="80" alt="Fronteers — vakvereniging voor front-end developers"></a></h1>
    <div class="section" lang="en">
     <h2>Faster JavaScript web apps by Alex MacCaw</h2>
     <video width="480" height="270" src="/_downloads/2013/alex-maccaw-faster-javascript-web-apps.mp4" controls>
      <track src="/congres/2013/sessions/faster-javascript.vtt" default>
      <p>The <code>&lt;video></code> element is not (yet) supported in your browser; you can <a href="/_downloads/2013/alex-maccaw-faster-javascript-web-apps.mp4">download the video</a> and watch it with <a href="http://www.videolan.org/vlc/">VLC</a>, for example.</p>
     </video>
     <ul>
      <li><a href="https://vimeo.com/77905678">Watch high quality video on Vimeo</a></li>
      <li><a href="/_downloads/2013/alex-maccaw-faster-javascript-web-apps.mp4">Download video</a> (MP4, 83MB)</li>
     </ul>
     <h3>Transcript</h3>
     <div class="transcript">
      <p><span data-start="00:00:06.400" data-end="00:00:08.160" data-start-seconds="6">Thank you very much, Paul.</span></p>
      <p><span data-start="00:00:08.160" data-end="00:00:11.430" data-start-seconds="8">I hope you guys are</span> <span data-start="00:00:08.160" data-end="00:00:11.430" data-start-seconds="8">all fed and watered.</span></p>
      <p><span data-start="00:00:11.430" data-end="00:00:14.680" data-start-seconds="11">But it's a real pleasure to</span> <span data-start="00:00:11.430" data-end="00:00:14.680" data-start-seconds="11">be speaking in front of you.</span></p>
      <p><span data-start="00:00:14.680" data-end="00:00:17.340" data-start-seconds="14">And it's also great</span> <span data-start="00:00:14.680" data-end="00:00:17.340" data-start-seconds="14">to see people speaking</span> <span data-start="00:00:17.340" data-end="00:00:19.480" data-start-seconds="17">in not their mother tongue.</span></p>
      <p><span data-start="00:00:19.480" data-end="00:00:22.910" data-start-seconds="19">It's hard enough to</span> <span data-start="00:00:19.480" data-end="00:00:22.910" data-start-seconds="19">make a talk in English</span> <span data-start="00:00:22.910" data-end="00:00:26.144" data-start-seconds="22">let alone something that</span> <span data-start="00:00:22.910" data-end="00:00:26.144" data-start-seconds="22">isn't your mother tongue.</span></p>
      <p><span data-start="00:00:26.144" data-end="00:00:28.810" data-start-seconds="26">Anyway, so today I'm going to be</span> <span data-start="00:00:26.144" data-end="00:00:28.810" data-start-seconds="26">talking about faster JavaScript</span> <span data-start="00:00:28.810" data-end="00:00:33.210" data-start-seconds="28">web apps and basically</span> <span data-start="00:00:28.810" data-end="00:00:33.210" data-start-seconds="28">optimizing web performance.</span></p>
      <p><span data-start="00:00:33.210" data-end="00:00:35.980" data-start-seconds="33">And we're going to be going</span> <span data-start="00:00:33.210" data-end="00:00:35.980" data-start-seconds="33">pretty fast, because there's</span> <span data-start="00:00:35.980" data-end="00:00:37.920" data-start-seconds="35">a lot to cover.</span></p>
      <p><span data-start="00:00:37.920" data-end="00:00:40.560" data-start-seconds="37">And I'm hopefully gonna leave</span> <span data-start="00:00:37.920" data-end="00:00:40.560" data-start-seconds="37">you with a few practical tips,</span> <span data-start="00:00:40.560" data-end="00:00:44.170" data-start-seconds="40">so by the end of this, you</span> <span data-start="00:00:40.560" data-end="00:00:44.170" data-start-seconds="40">have something to take home.</span></p>
      <p><span data-start="00:00:44.170" data-end="00:00:46.690" data-start-seconds="44">So speed matters.</span></p>
      <p><span data-start="00:00:46.690" data-end="00:00:49.800" data-start-seconds="46">And I probably don't have to</span> <span data-start="00:00:46.690" data-end="00:00:49.800" data-start-seconds="46">convince you guys of this.</span></p>
      <p><span data-start="00:00:49.800" data-end="00:00:52.780" data-start-seconds="49">But anyway, I'll just</span> <span data-start="00:00:49.800" data-end="00:00:52.780" data-start-seconds="49">give you some stats.</span></p>
      <p><span data-start="00:00:52.780" data-end="00:01:00.140" data-start-seconds="52">Every second of latency is about</span> <span data-start="00:00:52.780" data-end="00:01:00.140" data-start-seconds="52">0.65% increase in bounce rate.</span></p>
      <p><span data-start="00:01:00.140" data-end="00:01:05.800" data-start-seconds="60">Bing actually found out</span> <span data-start="00:01:00.140" data-end="00:01:05.800" data-start-seconds="60">that 2 seconds of latency</span> <span data-start="00:01:05.800" data-end="00:01:10.250" data-start-seconds="65">actually decreased</span> <span data-start="00:01:05.800" data-end="00:01:10.250" data-start-seconds="65">their revenue by 4.3%.</span></p>
      <p><span data-start="00:01:10.250" data-end="00:01:13.250" data-start-seconds="70">So it's really easy</span> <span data-start="00:01:10.250" data-end="00:01:13.250" data-start-seconds="70">to actually justify</span> <span data-start="00:01:13.250" data-end="00:01:16.370" data-start-seconds="73">spending time on</span> <span data-start="00:01:13.250" data-end="00:01:16.370" data-start-seconds="73">speed optimizations,</span> <span data-start="00:01:16.370" data-end="00:01:19.700" data-start-seconds="76">because it directly</span> <span data-start="00:01:16.370" data-end="00:01:19.700" data-start-seconds="76">affects your bottom line.</span></p>
      <p><span data-start="00:01:19.700" data-end="00:01:22.696" data-start-seconds="79">And this is the quote that I</span> <span data-start="00:01:19.700" data-end="00:01:22.696" data-start-seconds="79">love, actually, from Thomas.</span></p>
      <p><span data-start="00:01:22.696" data-end="00:01:25.690" data-start-seconds="82">&quot;Speed is the second</span> <span data-start="00:01:22.696" data-end="00:01:25.690" data-start-seconds="82">biggest engagement</span> <span data-start="00:01:25.690" data-end="00:01:28.810" data-start-seconds="85">driver on the internet just</span> <span data-start="00:01:25.690" data-end="00:01:28.810" data-start-seconds="85">after perceived speed.&quot;</span></p>
      <p><span data-start="00:01:28.810" data-end="00:01:30.020" data-start-seconds="88">And it's kinda true.</span></p>
      <p><span data-start="00:01:30.020" data-end="00:01:32.650" data-start-seconds="90">If you can trick the user into</span> <span data-start="00:01:30.020" data-end="00:01:32.650" data-start-seconds="90">believing something is fast,</span> <span data-start="00:01:32.650" data-end="00:01:35.260" data-start-seconds="92">then it's just as good</span> <span data-start="00:01:32.650" data-end="00:01:35.260" data-start-seconds="92">as actually being fast.</span></p>
      <p><span data-start="00:01:35.260" data-end="00:01:38.880" data-start-seconds="95">And here's a little UI 101.</span></p>
      <p><span data-start="00:01:38.880" data-end="00:01:42.350" data-start-seconds="98">These are the kind of</span> <span data-start="00:01:38.880" data-end="00:01:42.350" data-start-seconds="98">timings and responses</span> <span data-start="00:01:42.350" data-end="00:01:43.770" data-start-seconds="102">you get for your web apps.</span></p>
      <p><span data-start="00:01:43.770" data-end="00:01:46.310" data-start-seconds="103">So people are a little bit</span> <span data-start="00:01:43.770" data-end="00:01:46.310" data-start-seconds="103">more forgiving on the web</span> <span data-start="00:01:46.310" data-end="00:01:49.183" data-start-seconds="106">than on the desktop.</span></p>
      <p><span data-start="00:01:49.183" data-end="00:01:51.279" data-start-seconds="109">So they'll-- they'll</span> <span data-start="00:01:49.183" data-end="00:01:51.279" data-start-seconds="109">wait a little longer,</span> <span data-start="00:01:51.279" data-end="00:01:52.320" data-start-seconds="111">but not that much longer.</span></p>
      <p><span data-start="00:01:52.320" data-end="00:01:55.980" data-start-seconds="112">So you can see, 0</span> <span data-start="00:01:52.320" data-end="00:01:55.980" data-start-seconds="112">to 100 milliseconds,</span> <span data-start="00:01:55.980" data-end="00:01:57.420" data-start-seconds="115">people think it's instant.</span></p>
      <p><span data-start="00:01:57.420" data-end="00:02:00.020" data-start-seconds="117">100 to 300</span> <span data-start="00:01:57.420" data-end="00:02:00.020" data-start-seconds="117">milliseconds, sluggish.</span></p>
      <p><span data-start="00:02:00.020" data-end="00:02:02.800" data-start-seconds="120">And then from then on, it</span> <span data-start="00:02:00.020" data-end="00:02:02.800" data-start-seconds="120">just goes down the drain.</span></p>
      <p><span data-start="00:02:02.800" data-end="00:02:07.780" data-start-seconds="122">So you really want to be</span> <span data-start="00:02:02.800" data-end="00:02:07.780" data-start-seconds="122">aiming for about less than 300</span> <span data-start="00:02:07.780" data-end="00:02:11.165" data-start-seconds="127">or 300 to 500 milliseconds.</span></p>
      <p><span data-start="00:02:11.165" data-end="00:02:12.540" data-start-seconds="131">That's the kind</span> <span data-start="00:02:11.165" data-end="00:02:12.540" data-start-seconds="131">of speed that you</span> <span data-start="00:02:12.540" data-end="00:02:16.420" data-start-seconds="132">want your page to be served at.</span></p>
      <p><span data-start="00:02:16.420" data-end="00:02:20.400" data-start-seconds="136">And there's actually a</span> <span data-start="00:02:16.420" data-end="00:02:20.400" data-start-seconds="136">pretty interesting analysis</span> <span data-start="00:02:20.400" data-end="00:02:24.660" data-start-seconds="140">done by this chap at</span> <span data-start="00:02:20.400" data-end="00:02:24.660" data-start-seconds="140">Microsoft called [INAUDIBLE].</span></p>
      <p><span data-start="00:02:24.660" data-end="00:02:28.210" data-start-seconds="144">And he did a travel site</span> <span data-start="00:02:24.660" data-end="00:02:28.210" data-start-seconds="144">analysis of the top five travel</span> <span data-start="00:02:28.210" data-end="00:02:28.910" data-start-seconds="148">sites.</span></p>
      <p><span data-start="00:02:28.910" data-end="00:02:31.600" data-start-seconds="148">So this is Priceline, KAYAK,</span> <span data-start="00:02:28.910" data-end="00:02:31.600" data-start-seconds="148">travelos-- Travelocity,</span> <span data-start="00:02:31.600" data-end="00:02:32.960" data-start-seconds="151">and Orbitz.</span></p>
      <p><span data-start="00:02:32.960" data-end="00:02:37.600" data-start-seconds="152">And what was kind of interesting</span> <span data-start="00:02:32.960" data-end="00:02:37.600" data-start-seconds="152">is all these sites essentially</span> <span data-start="00:02:37.600" data-end="00:02:39.220" data-start-seconds="157">are meant to do the</span> <span data-start="00:02:37.600" data-end="00:02:39.220" data-start-seconds="157">same thing, right?</span> <span data-start="00:02:39.220" data-end="00:02:42.490" data-start-seconds="159">They take flights,</span> <span data-start="00:02:39.220" data-end="00:02:42.490" data-start-seconds="159">and they compare them.</span></p>
      <p><span data-start="00:02:42.490" data-end="00:02:47.900" data-start-seconds="162">But their actual markup</span> <span data-start="00:02:42.490" data-end="00:02:47.900" data-start-seconds="162">is pretty different.</span></p>
      <p><span data-start="00:02:47.900" data-end="00:02:51.820" data-start-seconds="167">So you have some sites</span> <span data-start="00:02:47.900" data-end="00:02:51.820" data-start-seconds="167">pretty small to download.</span></p>
      <p><span data-start="00:02:51.820" data-end="00:02:54.710" data-start-seconds="171">Some sites are kind of big.</span></p>
      <p><span data-start="00:02:54.710" data-end="00:02:57.010" data-start-seconds="174">In fact, it changes</span> <span data-start="00:02:54.710" data-end="00:02:57.010" data-start-seconds="174">by a factor of four.</span></p>
      <p><span data-start="00:02:57.010" data-end="00:03:01.070" data-start-seconds="177">So can anyone tell me which</span> <span data-start="00:02:57.010" data-end="00:03:01.070" data-start-seconds="177">site they think was the fastest?</span> <span data-start="00:03:06.020" data-end="00:03:08.318" data-start-seconds="186">Five?</span> <span data-start="00:03:08.318" data-end="00:03:09.580" data-start-seconds="188">So number five?</span> <span data-start="00:03:09.580" data-end="00:03:11.080" data-start-seconds="189">All right.</span></p>
      <p><span data-start="00:03:11.080" data-end="00:03:15.940" data-start-seconds="191">So, you're right.</span></p>
      <p><span data-start="00:03:15.940" data-end="00:03:20.380" data-start-seconds="195">So you--you might think that</span> <span data-start="00:03:15.940" data-end="00:03:20.380" data-start-seconds="195">the least amount of bytes</span> <span data-start="00:03:20.380" data-end="00:03:23.980" data-start-seconds="200">downloaded would be the fastest,</span> <span data-start="00:03:20.380" data-end="00:03:23.980" data-start-seconds="200">would be like site four--</span> <span data-start="00:03:23.980" data-end="00:03:26.450" data-start-seconds="203">sorry, it's like three-- or</span> <span data-start="00:03:23.980" data-end="00:03:26.450" data-start-seconds="203">the least amount of JavaScript</span> <span data-start="00:03:26.450" data-end="00:03:27.740" data-start-seconds="206">would be fastest.</span></p>
      <p><span data-start="00:03:27.740" data-end="00:03:29.850" data-start-seconds="207">But, actually, five</span> <span data-start="00:03:27.740" data-end="00:03:29.850" data-start-seconds="207">is the fastest,</span> <span data-start="00:03:29.850" data-end="00:03:31.350" data-start-seconds="209">even though it's</span> <span data-start="00:03:29.850" data-end="00:03:31.350" data-start-seconds="209">got more JavaScript</span> <span data-start="00:03:31.350" data-end="00:03:32.880" data-start-seconds="211">and bytes downloaded.</span></p>
      <p><span data-start="00:03:32.880" data-end="00:03:35.110" data-start-seconds="212">And you can see why here.</span></p>
      <p><span data-start="00:03:35.110" data-end="00:03:37.320" data-start-seconds="215">This is a kind of</span> <span data-start="00:03:35.110" data-end="00:03:37.320" data-start-seconds="215">breakdown of the rendering.</span></p>
      <p><span data-start="00:03:37.320" data-end="00:03:39.980" data-start-seconds="217">All that purple stuff at</span> <span data-start="00:03:37.320" data-end="00:03:39.980" data-start-seconds="217">the top is the rendering.</span></p>
      <p><span data-start="00:03:39.980" data-end="00:03:43.620" data-start-seconds="219">And all the gray stuff at the</span> <span data-start="00:03:39.980" data-end="00:03:43.620" data-start-seconds="219">bottom is the network requests.</span></p>
      <p><span data-start="00:03:43.620" data-end="00:03:49.560" data-start-seconds="223">And you can see site five has</span> <span data-start="00:03:43.620" data-end="00:03:49.560" data-start-seconds="223">remarkably less rendering time</span> <span data-start="00:03:49.560" data-end="00:03:53.450" data-start-seconds="229">and remarkably less</span> <span data-start="00:03:49.560" data-end="00:03:53.450" data-start-seconds="229">JavaScript time</span> <span data-start="00:03:53.450" data-end="00:03:57.660" data-start-seconds="233">and even though it has kind</span> <span data-start="00:03:53.450" data-end="00:03:57.660" data-start-seconds="233">of the same network impact.</span></p>
      <p><span data-start="00:03:57.660" data-end="00:04:01.080" data-start-seconds="237">So really, the point I'm</span> <span data-start="00:03:57.660" data-end="00:04:01.080" data-start-seconds="237">trying to demonstrate here</span> <span data-start="00:04:01.080" data-end="00:04:04.060" data-start-seconds="241">is that rendering time is</span> <span data-start="00:04:01.080" data-end="00:04:04.060" data-start-seconds="241">hugely important when it comes</span> <span data-start="00:04:04.060" data-end="00:04:06.423" data-start-seconds="244">to your initial page speed.</span></p>
      <p><span data-start="00:04:09.020" data-end="00:04:11.280" data-start-seconds="249">So this is what they call</span> <span data-start="00:04:09.020" data-end="00:04:11.280" data-start-seconds="249">a resource waterfall.</span></p>
      <p><span data-start="00:04:11.280" data-end="00:04:14.280" data-start-seconds="251">And you can kind of see</span> <span data-start="00:04:11.280" data-end="00:04:14.280" data-start-seconds="251">in a bit more detail</span> <span data-start="00:04:14.280" data-end="00:04:16.070" data-start-seconds="254">how pages are loaded.</span></p>
      <p><span data-start="00:04:16.070" data-end="00:04:18.240" data-start-seconds="256">Dark green is the</span> <span data-start="00:04:16.070" data-end="00:04:18.240" data-start-seconds="256">DNS resolution.</span></p>
      <p><span data-start="00:04:18.240" data-end="00:04:20.540" data-start-seconds="258">Orange is the TCP handshake.</span></p>
      <p><span data-start="00:04:20.540" data-end="00:04:23.240" data-start-seconds="260">Green is HTTP request.</span></p>
      <p><span data-start="00:04:23.240" data-end="00:04:28.200" data-start-seconds="263">And blue is the time taken</span> <span data-start="00:04:23.240" data-end="00:04:28.200" data-start-seconds="263">to download a resource.</span></p>
      <p><span data-start="00:04:28.200" data-end="00:04:30.660" data-start-seconds="268">And you notice that</span> <span data-start="00:04:28.200" data-end="00:04:30.660" data-start-seconds="268">while Monocle I/O, which</span> <span data-start="00:04:30.660" data-end="00:04:33.570" data-start-seconds="270">is the site that</span> <span data-start="00:04:30.660" data-end="00:04:33.570" data-start-seconds="270">is being fetched,</span> <span data-start="00:04:33.570" data-end="00:04:35.610" data-start-seconds="273">new requests are</span> <span data-start="00:04:33.570" data-end="00:04:35.610" data-start-seconds="273">being dispatched.</span></p>
      <p><span data-start="00:04:35.610" data-end="00:04:41.830" data-start-seconds="275">So you can really see that the</span> <span data-start="00:04:35.610" data-end="00:04:41.830" data-start-seconds="275">time that assets are taken,</span> <span data-start="00:04:41.830" data-end="00:04:45.050" data-start-seconds="281">or like downloaded,</span> <span data-start="00:04:41.830" data-end="00:04:45.050" data-start-seconds="281">really depends</span> <span data-start="00:04:45.050" data-end="00:04:47.450" data-start-seconds="285">on the structure of your page.</span></p>
      <p><span data-start="00:04:47.450" data-end="00:04:50.870" data-start-seconds="287">Because the HTML's kind</span> <span data-start="00:04:47.450" data-end="00:04:50.870" data-start-seconds="287">of passed incrementally.</span></p>
      <p><span data-start="00:04:50.870" data-end="00:04:54.910" data-start-seconds="290">And you can see here we've</span> <span data-start="00:04:50.870" data-end="00:04:54.910" data-start-seconds="290">got this DNS resolution</span> <span data-start="00:04:54.910" data-end="00:04:58.904" data-start-seconds="294">and handshake, that blue</span> <span data-start="00:04:54.910" data-end="00:04:58.904" data-start-seconds="294">line and the orange bit.</span></p>
      <p><span data-start="00:04:58.904" data-end="00:05:00.320" data-start-seconds="298">And you can see</span> <span data-start="00:04:58.904" data-end="00:05:00.320" data-start-seconds="298">it's actually kind</span> <span data-start="00:05:00.320" data-end="00:05:05.240" data-start-seconds="300">of a limiting factor for a</span> <span data-start="00:05:00.320" data-end="00:05:05.240" data-start-seconds="300">lot of other requests here.</span></p>
      <p><span data-start="00:05:05.240" data-end="00:05:07.950" data-start-seconds="305">In other words, bandwidth is</span> <span data-start="00:05:05.240" data-end="00:05:07.950" data-start-seconds="305">not really the limiting factor.</span></p>
      <p><span data-start="00:05:07.950" data-end="00:05:10.810" data-start-seconds="307">It's actually network</span> <span data-start="00:05:07.950" data-end="00:05:10.810" data-start-seconds="307">latency, the time taken</span> <span data-start="00:05:10.810" data-end="00:05:13.740" data-start-seconds="310">between server and client.</span></p>
      <p><span data-start="00:05:13.740" data-end="00:05:16.520" data-start-seconds="313">And you can see further requests</span> <span data-start="00:05:13.740" data-end="00:05:16.520" data-start-seconds="313">down the page don't actually</span> <span data-start="00:05:16.520" data-end="00:05:19.610" data-start-seconds="316">need to do that DNS resolution,</span> <span data-start="00:05:16.520" data-end="00:05:19.610" data-start-seconds="316">because of keepalive.</span></p>
      <p><span data-start="00:05:19.610" data-end="00:05:22.680" data-start-seconds="319">They're using the</span> <span data-start="00:05:19.610" data-end="00:05:22.680" data-start-seconds="319">same TCP socket.</span></p>
      <p><span data-start="00:05:22.680" data-end="00:05:26.405" data-start-seconds="322">And you can see various</span> <span data-start="00:05:22.680" data-end="00:05:26.405" data-start-seconds="322">events here, DOM</span> <span data-start="00:05:26.405" data-end="00:05:28.920" data-start-seconds="326">content loaded, start</span> <span data-start="00:05:26.405" data-end="00:05:28.920" data-start-seconds="326">render complete.</span></p>
      <p><span data-start="00:05:28.920" data-end="00:05:32.795" data-start-seconds="328">And kind of an overall, you</span> <span data-start="00:05:28.920" data-end="00:05:32.795" data-start-seconds="328">can see about half the time</span> <span data-start="00:05:32.795" data-end="00:05:34.850" data-start-seconds="332">is spent on network.</span></p>
      <p><span data-start="00:05:34.850" data-end="00:05:37.630" data-start-seconds="334">About half of it</span> <span data-start="00:05:34.850" data-end="00:05:37.630" data-start-seconds="334">is spent rendering.</span></p>
      <p><span data-start="00:05:37.630" data-end="00:05:39.822" data-start-seconds="337">So that's our two bottlenecks,</span> <span data-start="00:05:37.630" data-end="00:05:39.822" data-start-seconds="337">basically, network</span> <span data-start="00:05:39.822" data-end="00:05:40.950" data-start-seconds="339">and rendering.</span></p>
      <p><span data-start="00:05:40.950" data-end="00:05:44.900" data-start-seconds="340">And that's what we're going</span> <span data-start="00:05:40.950" data-end="00:05:44.900" data-start-seconds="340">to address in this talk.</span></p>
      <p><span data-start="00:05:44.900" data-end="00:05:49.840" data-start-seconds="344">So network is kind of</span> <span data-start="00:05:44.900" data-end="00:05:49.840" data-start-seconds="344">easy to optimize in a way.</span></p>
      <p><span data-start="00:05:49.840" data-end="00:05:51.930" data-start-seconds="349">You just follow</span> <span data-start="00:05:49.840" data-end="00:05:51.930" data-start-seconds="349">some good defaults,</span> <span data-start="00:05:51.930" data-end="00:05:53.770" data-start-seconds="351">and you should be</span> <span data-start="00:05:51.930" data-end="00:05:53.770" data-start-seconds="351">most of the way there.</span></p>
      <p><span data-start="00:05:53.770" data-end="00:05:59.570" data-start-seconds="353">I'm going to give you 12 rules</span> <span data-start="00:05:53.770" data-end="00:05:59.570" data-start-seconds="353">for network optimization.</span></p>
      <p><span data-start="00:05:59.570" data-end="00:06:02.140" data-start-seconds="359">But they basically all boil</span> <span data-start="00:05:59.570" data-end="00:06:02.140" data-start-seconds="359">down to these two things,</span> <span data-start="00:06:02.140" data-end="00:06:04.740" data-start-seconds="362">eliminate and reduce the</span> <span data-start="00:06:02.140" data-end="00:06:04.740" data-start-seconds="362">unnecessary network latency</span> <span data-start="00:06:04.740" data-end="00:06:08.055" data-start-seconds="364">and minimize the amount</span> <span data-start="00:06:04.740" data-end="00:06:08.055" data-start-seconds="364">of bytes transferred.</span></p>
      <p><span data-start="00:06:08.055" data-end="00:06:09.880" data-start-seconds="368">Because the user</span> <span data-start="00:06:08.055" data-end="00:06:09.880" data-start-seconds="368">only gets value when</span> <span data-start="00:06:09.880" data-end="00:06:12.410" data-start-seconds="369">work is painted to the screen.</span></p>
      <p><span data-start="00:06:12.410" data-end="00:06:14.900" data-start-seconds="372">So here are the tips.</span></p>
      <p><span data-start="00:06:14.900" data-end="00:06:16.670" data-start-seconds="374">Here are the rules for network.</span></p>
      <p><span data-start="00:06:16.670" data-end="00:06:17.990" data-start-seconds="376">Number one, quick response.</span></p>
      <p><span data-start="00:06:17.990" data-end="00:06:21.600" data-start-seconds="377">You need to respond to the</span> <span data-start="00:06:17.990" data-end="00:06:21.600" data-start-seconds="377">request as quickly as possible.</span></p>
      <p><span data-start="00:06:21.600" data-end="00:06:26.850" data-start-seconds="381">And Google search will actually</span> <span data-start="00:06:21.600" data-end="00:06:26.850" data-start-seconds="381">return the head tag of the page</span> <span data-start="00:06:26.850" data-end="00:06:29.200" data-start-seconds="386">before it's even</span> <span data-start="00:06:26.850" data-end="00:06:29.200" data-start-seconds="386">passed the request.</span></p>
      <p><span data-start="00:06:29.200" data-end="00:06:31.990" data-start-seconds="389">Before it's done anything,</span> <span data-start="00:06:29.200" data-end="00:06:31.990" data-start-seconds="389">it'll return that.</span></p>
      <p><span data-start="00:06:31.990" data-end="00:06:35.650" data-start-seconds="391">And this means that the</span> <span data-start="00:06:31.990" data-end="00:06:35.650" data-start-seconds="391">browser can actually</span> <span data-start="00:06:35.650" data-end="00:06:38.110" data-start-seconds="395">go through that</span> <span data-start="00:06:35.650" data-end="00:06:38.110" data-start-seconds="395">HTML and it knows</span> <span data-start="00:06:38.110" data-end="00:06:41.780" data-start-seconds="398">what resources it's going</span> <span data-start="00:06:38.110" data-end="00:06:41.780" data-start-seconds="398">to fetch subsequently.</span></p>
      <p><span data-start="00:06:41.780" data-end="00:06:43.220" data-start-seconds="401">Don't preload data.</span></p>
      <p><span data-start="00:06:43.220" data-end="00:06:47.510" data-start-seconds="403">Don't do loads of SQL</span> <span data-start="00:06:43.220" data-end="00:06:47.510" data-start-seconds="403">queries in that initial index</span> <span data-start="00:06:47.510" data-end="00:06:49.260" data-start-seconds="407">initial request.</span></p>
      <p><span data-start="00:06:49.260" data-end="00:06:51.150" data-start-seconds="409">If you do need to</span> <span data-start="00:06:49.260" data-end="00:06:51.150" data-start-seconds="409">preload data, put that</span> <span data-start="00:06:51.150" data-end="00:06:53.340" data-start-seconds="411">in a second deferred script.</span></p>
      <p><span data-start="00:06:53.340" data-end="00:06:56.310" data-start-seconds="413">I'm going to cover</span> <span data-start="00:06:53.340" data-end="00:06:56.310" data-start-seconds="413">that a bit later.</span></p>
      <p><span data-start="00:06:56.310" data-end="00:06:57.775" data-start-seconds="416">Use keepalive.</span></p>
      <p><span data-start="00:06:57.775" data-end="00:06:59.300" data-start-seconds="417">You're probably</span> <span data-start="00:06:57.775" data-end="00:06:59.300" data-start-seconds="417">already using this.</span></p>
      <p><span data-start="00:06:59.300" data-end="00:07:02.830" data-start-seconds="419">It's enabled by default</span> <span data-start="00:06:59.300" data-end="00:07:02.830" data-start-seconds="419">in pretty much everything.</span></p>
      <p><span data-start="00:07:02.830" data-end="00:07:03.880" data-start-seconds="422">But it is important.</span></p>
      <p><span data-start="00:07:03.880" data-end="00:07:06.950" data-start-seconds="423">You probably want to check</span> <span data-start="00:07:03.880" data-end="00:07:06.950" data-start-seconds="423">it is actually enabled.</span></p>
      <p><span data-start="00:07:06.950" data-end="00:07:10.290" data-start-seconds="426">Keepalive will reuse</span> <span data-start="00:07:06.950" data-end="00:07:10.290" data-start-seconds="426">established TCP connections.</span></p>
      <p><span data-start="00:07:10.290" data-end="00:07:17.160" data-start-seconds="430">Because your three way</span> <span data-start="00:07:10.290" data-end="00:07:17.160" data-start-seconds="430">SYN, SYN-ACK, ACK handshake</span> <span data-start="00:07:17.160" data-end="00:07:22.460" data-start-seconds="437">is kind of expensive, especially</span> <span data-start="00:07:17.160" data-end="00:07:22.460" data-start-seconds="437">if there's SSL negotiation.</span></p>
      <p><span data-start="00:07:22.460" data-end="00:07:24.720" data-start-seconds="442">So use keepalive.</span></p>
      <p><span data-start="00:07:24.720" data-end="00:07:25.600" data-start-seconds="444">Don't redirect.</span></p>
      <p><span data-start="00:07:25.600" data-end="00:07:26.910" data-start-seconds="445">Now, again, you may scoff.</span></p>
      <p><span data-start="00:07:26.910" data-end="00:07:28.640" data-start-seconds="446">Like, who redirects</span> <span data-start="00:07:26.910" data-end="00:07:28.640" data-start-seconds="446">to the top level?</span> <span data-start="00:07:28.640" data-end="00:07:32.197" data-start-seconds="448">But actually, half of the</span> <span data-start="00:07:28.640" data-end="00:07:32.197" data-start-seconds="448">world's top websites-- well,</span> <span data-start="00:07:32.197" data-end="00:07:34.740" data-start-seconds="452">about 63% of the</span> <span data-start="00:07:32.197" data-end="00:07:34.740" data-start-seconds="452">world's top websites--</span> <span data-start="00:07:34.740" data-end="00:07:36.940" data-start-seconds="454">have a top level redirect.</span></p>
      <p><span data-start="00:07:36.940" data-end="00:07:41.650" data-start-seconds="456">So I kind of advise</span> <span data-start="00:07:36.940" data-end="00:07:41.650" data-start-seconds="456">you don't use ww., just</span></p>
      <p><span data-start="00:07:41.650" data-end="00:07:43.100" data-start-seconds="461">have a naked domain.</span></p>
      <p><span data-start="00:07:43.100" data-end="00:07:47.740" data-start-seconds="463">Don't redirect, and--</span> <span data-start="00:07:43.100" data-end="00:07:47.740" data-start-seconds="463">and you can actually</span> <span data-start="00:07:47.740" data-end="00:07:51.420" data-start-seconds="467">save up to, like, 200</span> <span data-start="00:07:47.740" data-end="00:07:51.420" data-start-seconds="467">milliseconds there.</span></p>
      <p><span data-start="00:07:51.420" data-end="00:07:52.930" data-start-seconds="471">Use a CDN.</span></p>
      <p><span data-start="00:07:52.930" data-end="00:07:54.860" data-start-seconds="472">CDN will decrease</span> <span data-start="00:07:52.930" data-end="00:07:54.860" data-start-seconds="472">the amount of hops,</span> <span data-start="00:07:54.860" data-end="00:07:58.430" data-start-seconds="474">um, that your request from</span> <span data-start="00:07:54.860" data-end="00:07:58.430" data-start-seconds="474">the client to the server</span> <span data-start="00:07:58.430" data-end="00:08:00.250" data-start-seconds="478">has to go through.</span></p>
      <p><span data-start="00:08:00.250" data-end="00:08:02.600" data-start-seconds="480">And it'll put the</span> <span data-start="00:08:00.250" data-end="00:08:02.600" data-start-seconds="480">data or the assets</span> <span data-start="00:08:02.600" data-end="00:08:06.330" data-start-seconds="482">as geographically close</span> <span data-start="00:08:02.600" data-end="00:08:06.330" data-start-seconds="482">to the client as possible.</span></p>
      <p><span data-start="00:08:06.330" data-end="00:08:08.670" data-start-seconds="486">And this is especially</span> <span data-start="00:08:06.330" data-end="00:08:08.670" data-start-seconds="486">true with static resources.</span></p>
      <p><span data-start="00:08:08.670" data-end="00:08:11.800" data-start-seconds="488">You-- if I were you, I would</span> <span data-start="00:08:08.670" data-end="00:08:11.800" data-start-seconds="488">put all your static resources</span> <span data-start="00:08:11.800" data-end="00:08:12.730" data-start-seconds="491">on a CDN.</span></p>
      <p><span data-start="00:08:12.730" data-end="00:08:15.350" data-start-seconds="492">There's no reason</span> <span data-start="00:08:12.730" data-end="00:08:15.350" data-start-seconds="492">not to be honest.</span></p>
      <p><span data-start="00:08:15.350" data-end="00:08:18.180" data-start-seconds="495">Again, you got to</span> <span data-start="00:08:15.350" data-end="00:08:18.180" data-start-seconds="495">reduce resources.</span></p>
      <p><span data-start="00:08:18.180" data-end="00:08:23.370" data-start-seconds="498">Um, it might seem obvious,</span> <span data-start="00:08:18.180" data-end="00:08:23.370" data-start-seconds="498">but a vast amount of websites</span> <span data-start="00:08:23.370" data-end="00:08:26.510" data-start-seconds="503">have-- a lot, about--</span> <span data-start="00:08:23.370" data-end="00:08:26.510" data-start-seconds="503">the average is about 90</span> <span data-start="00:08:26.510" data-end="00:08:31.710" data-start-seconds="506">plus individual resources, which</span> <span data-start="00:08:26.510" data-end="00:08:31.710" data-start-seconds="506">is about 770 K, which is a lot.</span></p>
      <p><span data-start="00:08:31.710" data-end="00:08:34.740" data-start-seconds="511">And the vast amount of</span> <span data-start="00:08:31.710" data-end="00:08:34.740" data-start-seconds="511">them are JavaScript images.</span></p>
      <p><span data-start="00:08:34.740" data-end="00:08:39.210" data-start-seconds="514">So you have to focus on that</span> <span data-start="00:08:34.740" data-end="00:08:39.210" data-start-seconds="514">when you're reducing resources.</span></p>
      <p><span data-start="00:08:39.210" data-end="00:08:42.419" data-start-seconds="519">You got to minify</span> <span data-start="00:08:39.210" data-end="00:08:42.419" data-start-seconds="519">JavaScript and CSS.</span></p>
      <p><span data-start="00:08:42.419" data-end="00:08:44.810" data-start-seconds="522">Actually, gzipping the</span> <span data-start="00:08:42.419" data-end="00:08:44.810" data-start-seconds="522">response will take out a lot</span> <span data-start="00:08:44.810" data-end="00:08:46.400" data-start-seconds="524">of the duplication in there.</span></p>
      <p><span data-start="00:08:46.400" data-end="00:08:48.350" data-start-seconds="526">But minifiying</span> <span data-start="00:08:46.400" data-end="00:08:48.350" data-start-seconds="526">JavaScript will actually</span> <span data-start="00:08:48.350" data-end="00:08:53.190" data-start-seconds="528">rewrite your JavaScript, so you</span> <span data-start="00:08:48.350" data-end="00:08:53.190" data-start-seconds="528">still get space savings there.</span></p>
      <p><span data-start="00:08:53.190" data-end="00:08:56.210" data-start-seconds="533">You got to</span> <span data-start="00:08:53.190" data-end="00:08:56.210" data-start-seconds="533">concatenate resources.</span></p>
      <p><span data-start="00:08:56.210" data-end="00:09:00.050" data-start-seconds="536">Again, this is going to reduce</span> <span data-start="00:08:56.210" data-end="00:09:00.050" data-start-seconds="536">the amount of TCP requests.</span></p>
      <p><span data-start="00:09:00.050" data-end="00:09:01.770" data-start-seconds="540">It's going to make</span> <span data-start="00:09:00.050" data-end="00:09:01.770" data-start-seconds="540">things a lot faster.</span></p>
      <p><span data-start="00:09:01.770" data-end="00:09:06.600" data-start-seconds="541">Because your enemy here is</span> <span data-start="00:09:01.770" data-end="00:09:06.600" data-start-seconds="541">latency and not bandwidth.</span></p>
      <p><span data-start="00:09:06.600" data-end="00:09:08.090" data-start-seconds="546">You got to gzip responses.</span></p>
      <p><span data-start="00:09:08.090" data-end="00:09:11.060" data-start-seconds="548">And actually, this is the--</span> <span data-start="00:09:08.090" data-end="00:09:11.060" data-start-seconds="548">had the biggest effect out</span> <span data-start="00:09:11.060" data-end="00:09:14.602" data-start-seconds="551">of all the tips here</span> <span data-start="00:09:11.060" data-end="00:09:14.602" data-start-seconds="551">on my performance.</span></p>
      <p><span data-start="00:09:14.602" data-end="00:09:16.810" data-start-seconds="554">Now, for some reason this</span> <span data-start="00:09:14.602" data-end="00:09:16.810" data-start-seconds="554">isn't turned on by default,</span> <span data-start="00:09:16.810" data-end="00:09:19.760" data-start-seconds="556">in a lot of servers.</span></p>
      <p><span data-start="00:09:19.760" data-end="00:09:21.910" data-start-seconds="559">It's not turned on by</span> <span data-start="00:09:19.760" data-end="00:09:21.910" data-start-seconds="559">default in NGINX and Apache,</span> <span data-start="00:09:21.910" data-end="00:09:25.120" data-start-seconds="561">which kind of</span> <span data-start="00:09:21.910" data-end="00:09:25.120" data-start-seconds="561">sucks, but I presume</span> <span data-start="00:09:25.120" data-end="00:09:26.430" data-start-seconds="565">for compatibility reasons.</span></p>
      <p><span data-start="00:09:26.430" data-end="00:09:29.400" data-start-seconds="566">But to be honest,</span> <span data-start="00:09:26.430" data-end="00:09:29.400" data-start-seconds="566">you've got nothing</span> <span data-start="00:09:29.400" data-end="00:09:32.200" data-start-seconds="569">to lose by turning it on.</span></p>
      <p><span data-start="00:09:32.200" data-end="00:09:36.570" data-start-seconds="572">And I think, honestly, they</span> <span data-start="00:09:32.200" data-end="00:09:36.570" data-start-seconds="572">should change the defaults.</span></p>
      <p><span data-start="00:09:36.570" data-end="00:09:38.430" data-start-seconds="576">So you should cache</span> <span data-start="00:09:36.570" data-end="00:09:38.430" data-start-seconds="576">static assets.</span></p>
      <p><span data-start="00:09:38.430" data-end="00:09:40.640" data-start-seconds="578">And what I usually do</span> <span data-start="00:09:38.430" data-end="00:09:40.640" data-start-seconds="578">is set an expires header</span> <span data-start="00:09:40.640" data-end="00:09:43.810" data-start-seconds="580">on every static</span> <span data-start="00:09:40.640" data-end="00:09:43.810" data-start-seconds="580">asset for a year.</span></p>
      <p><span data-start="00:09:43.810" data-end="00:09:44.695" data-start-seconds="583">So why a year?</span> <span data-start="00:09:44.695" data-end="00:09:50.010" data-start-seconds="584">Well, the cache protocol,</span> <span data-start="00:09:44.695" data-end="00:09:50.010" data-start-seconds="584">the caching spec,</span> <span data-start="00:09:50.010" data-end="00:09:52.450" data-start-seconds="590">says that anything</span> <span data-start="00:09:50.010" data-end="00:09:52.450" data-start-seconds="590">longer than a year is not</span> <span data-start="00:09:52.450" data-end="00:09:56.585" data-start-seconds="592">going to be actually recognized,</span> <span data-start="00:09:52.450" data-end="00:09:56.585" data-start-seconds="592">is not going to be used.</span></p>
      <p><span data-start="00:09:56.585" data-end="00:09:59.196" data-start-seconds="596">So a year is kind of the</span> <span data-start="00:09:56.585" data-end="00:09:59.196" data-start-seconds="596">maximum that you can use.</span></p>
      <p><span data-start="00:09:59.196" data-end="00:10:00.820" data-start-seconds="599">And then what you</span> <span data-start="00:09:59.196" data-end="00:10:00.820" data-start-seconds="599">can do is put a check</span> <span data-start="00:10:00.820" data-end="00:10:07.610" data-start-seconds="600">sum of the source of that</span> <span data-start="00:10:00.820" data-end="00:10:07.610" data-start-seconds="600">asset and append that check sum</span> <span data-start="00:10:07.610" data-end="00:10:08.810" data-start-seconds="607">to the file name.</span></p>
      <p><span data-start="00:10:08.810" data-end="00:10:12.980" data-start-seconds="608">So whenever the asset changes,</span> <span data-start="00:10:08.810" data-end="00:10:12.980" data-start-seconds="608">then the file name will change.</span></p>
      <p><span data-start="00:10:12.980" data-end="00:10:15.450" data-start-seconds="612">And you get automatic</span> <span data-start="00:10:12.980" data-end="00:10:15.450" data-start-seconds="612">invalidation.</span></p>
      <p><span data-start="00:10:15.450" data-end="00:10:20.010" data-start-seconds="615">And I think that is the best</span> <span data-start="00:10:15.450" data-end="00:10:20.010" data-start-seconds="615">way of doing static caching.</span></p>
      <p><span data-start="00:10:20.010" data-end="00:10:23.870" data-start-seconds="620">Cache AJAX requests,</span> <span data-start="00:10:20.010" data-end="00:10:23.870" data-start-seconds="620">again, you may scoff.</span></p>
      <p><span data-start="00:10:23.870" data-end="00:10:28.510" data-start-seconds="623">But only 1% of AJAX requests</span> <span data-start="00:10:23.870" data-end="00:10:28.510" data-start-seconds="623">on the web are cached.</span></p>
      <p><span data-start="00:10:28.510" data-end="00:10:30.510" data-start-seconds="628">Now, you may want to</span> <span data-start="00:10:28.510" data-end="00:10:30.510" data-start-seconds="628">cache at the AJAX layer.</span></p>
      <p><span data-start="00:10:30.510" data-end="00:10:34.090" data-start-seconds="630">Or you may want to cache</span> <span data-start="00:10:30.510" data-end="00:10:34.090" data-start-seconds="630">at the JavaScript layer</span> <span data-start="00:10:34.090" data-end="00:10:37.310" data-start-seconds="634">slightly above it with just</span> <span data-start="00:10:34.090" data-end="00:10:37.310" data-start-seconds="634">caching objects, up to you.</span></p>
      <p><span data-start="00:10:37.310" data-end="00:10:39.200" data-start-seconds="637">But if you do cache</span> <span data-start="00:10:37.310" data-end="00:10:39.200" data-start-seconds="637">to the AJAX layer,</span> <span data-start="00:10:39.200" data-end="00:10:43.290" data-start-seconds="639">you can send cache property</span> <span data-start="00:10:39.200" data-end="00:10:43.290" data-start-seconds="639">to jQuery for using that.</span></p>
      <p><span data-start="00:10:43.290" data-end="00:10:46.464" data-start-seconds="643">And that will make sure the</span> <span data-start="00:10:43.290" data-end="00:10:46.464" data-start-seconds="643">AJAX requests are cached.</span></p>
      <p><span data-start="00:10:46.464" data-end="00:10:49.360" data-start-seconds="646">Remove duplicate code,</span> <span data-start="00:10:46.464" data-end="00:10:49.360" data-start-seconds="646">again, another obvious one.</span></p>
      <p><span data-start="00:10:49.360" data-end="00:10:52.450" data-start-seconds="649">But 58% of the web has</span> <span data-start="00:10:49.360" data-end="00:10:52.450" data-start-seconds="649">duplicate code on it.</span></p>
      <p><span data-start="00:10:52.450" data-end="00:10:56.592" data-start-seconds="652">I actually found two versions</span> <span data-start="00:10:52.450" data-end="00:10:56.592" data-start-seconds="652">of jQuery on stripe.com.</span></p>
      <p><span data-start="00:10:56.592" data-end="00:10:59.640" data-start-seconds="656">So it can happen</span> <span data-start="00:10:56.592" data-end="00:10:59.640" data-start-seconds="656">to the best of us.</span></p>
      <p><span data-start="00:10:59.640" data-end="00:11:01.970" data-start-seconds="659">You got to minimize</span> <span data-start="00:10:59.640" data-end="00:11:01.970" data-start-seconds="659">and compress images.</span></p>
      <p><span data-start="00:11:01.970" data-end="00:11:06.860" data-start-seconds="661">About half of the bytes on</span> <span data-start="00:11:01.970" data-end="00:11:06.860" data-start-seconds="661">most websites today is images.</span></p>
      <p><span data-start="00:11:06.860" data-end="00:11:09.602" data-start-seconds="666">Really avoid large images.</span></p>
      <p><span data-start="00:11:09.602" data-end="00:11:13.130" data-start-seconds="669">Never resize images in CSS.</span></p>
      <p><span data-start="00:11:13.130" data-end="00:11:15.650" data-start-seconds="673">Remember, PNG is a lossless.</span></p>
      <p><span data-start="00:11:15.650" data-end="00:11:18.870" data-start-seconds="675">Often, formats like</span> <span data-start="00:11:15.650" data-end="00:11:18.870" data-start-seconds="675">JPEGs will be smaller.</span></p>
      <p><span data-start="00:11:18.870" data-end="00:11:22.810" data-start-seconds="678">And you should sprite</span> <span data-start="00:11:18.870" data-end="00:11:22.810" data-start-seconds="678">images when it is necessary.</span></p>
      <p><span data-start="00:11:22.810" data-end="00:11:25.970" data-start-seconds="682">Your standards made</span> <span data-start="00:11:22.810" data-end="00:11:25.970" data-start-seconds="682">for IE, now this</span> <span data-start="00:11:25.970" data-end="00:11:30.080" data-start-seconds="685">is a header that you can</span> <span data-start="00:11:25.970" data-end="00:11:30.080" data-start-seconds="685">set, X-UA-Compatible header.</span></p>
      <p><span data-start="00:11:30.080" data-end="00:11:32.650" data-start-seconds="690">If you just search for</span> <span data-start="00:11:30.080" data-end="00:11:32.650" data-start-seconds="690">standards made IE, Google it,</span> <span data-start="00:11:32.650" data-end="00:11:33.858" data-start-seconds="692">it'll show you how to set it.</span></p>
      <p><span data-start="00:11:33.858" data-end="00:11:37.370" data-start-seconds="693">A lot of frameworks like</span> <span data-start="00:11:33.858" data-end="00:11:37.370" data-start-seconds="693">Rails set it for you.</span></p>
      <p><span data-start="00:11:37.370" data-end="00:11:40.050" data-start-seconds="697">And this will make it render the</span> <span data-start="00:11:37.370" data-end="00:11:40.050" data-start-seconds="697">HTML a bit more intelligently</span> <span data-start="00:11:40.050" data-end="00:11:44.090" data-start-seconds="700">and actually speed</span> <span data-start="00:11:40.050" data-end="00:11:44.090" data-start-seconds="700">up the request.</span></p>
      <p><span data-start="00:11:44.090" data-end="00:11:48.540" data-start-seconds="704">You should definitely put this</span> <span data-start="00:11:44.090" data-end="00:11:48.540" data-start-seconds="704">in the header, in a HTP header,</span> <span data-start="00:11:48.540" data-end="00:11:50.530" data-start-seconds="708">not a tag in the page.</span></p>
      <p><span data-start="00:11:50.530" data-end="00:11:54.150" data-start-seconds="710">Because if you put it in a</span> <span data-start="00:11:50.530" data-end="00:11:54.150" data-start-seconds="710">tag, then IE passes the page,</span> <span data-start="00:11:54.150" data-end="00:11:56.730" data-start-seconds="714">says the tag, figures out it's</span> <span data-start="00:11:54.150" data-end="00:11:56.730" data-start-seconds="714">got to change its rendering</span> <span data-start="00:11:56.730" data-end="00:11:58.110" data-start-seconds="716">mode, and just starts again.</span></p>
      <p><span data-start="00:11:58.110" data-end="00:12:00.380" data-start-seconds="718">It sucks.</span></p>
      <p><span data-start="00:12:00.380" data-end="00:12:02.450" data-start-seconds="720">Put style sheets first.</span></p>
      <p><span data-start="00:12:02.450" data-end="00:12:07.290" data-start-seconds="722">So you want the browser to-- to</span> <span data-start="00:12:02.450" data-end="00:12:07.290" data-start-seconds="722">issue that style sheet network</span> <span data-start="00:12:07.290" data-end="00:12:10.050" data-start-seconds="727">request first, because</span> <span data-start="00:12:07.290" data-end="00:12:10.050" data-start-seconds="727">it will block painting</span> <span data-start="00:12:10.050" data-end="00:12:12.400" data-start-seconds="730">until it has a style sheet.</span></p>
      <p><span data-start="00:12:12.400" data-end="00:12:14.860" data-start-seconds="732">Inline styles invalidate</span> <span data-start="00:12:12.400" data-end="00:12:14.860" data-start-seconds="732">the CPU cache.</span></p>
      <p><span data-start="00:12:14.860" data-end="00:12:17.280" data-start-seconds="734">Use them sparingly.</span></p>
      <p><span data-start="00:12:17.280" data-end="00:12:19.950" data-start-seconds="737">Only queue the required</span> <span data-start="00:12:17.280" data-end="00:12:19.950" data-start-seconds="737">styles with the page.</span></p>
      <p><span data-start="00:12:19.950" data-end="00:12:22.970" data-start-seconds="739">Don't share between pages,</span> <span data-start="00:12:19.950" data-end="00:12:22.970" data-start-seconds="739">unless there's, like,</span> <span data-start="00:12:22.970" data-end="00:12:27.330" data-start-seconds="742">obvious styles that's shared</span> <span data-start="00:12:22.970" data-end="00:12:27.330" data-start-seconds="742">between all your sites.</span></p>
      <p><span data-start="00:12:27.330" data-end="00:12:31.000" data-start-seconds="747">Stop blocking</span> <span data-start="00:12:27.330" data-end="00:12:31.000" data-start-seconds="747">JavaScript, use defer.</span></p>
      <p><span data-start="00:12:31.000" data-end="00:12:34.460" data-start-seconds="751">If you can, just use defer on</span> <span data-start="00:12:31.000" data-end="00:12:34.460" data-start-seconds="751">every single JavaScript tag</span> <span data-start="00:12:34.460" data-end="00:12:35.530" data-start-seconds="754">you have.</span></p>
      <p><span data-start="00:12:35.530" data-end="00:12:39.108" data-start-seconds="755">Again, test-- Paul is</span> <span data-start="00:12:35.530" data-end="00:12:39.108" data-start-seconds="755">mentioning a bargain. jQuery</span></p>
      <p><span data-start="00:12:39.108" data-end="00:12:41.860" data-start-seconds="759">UI and jQuery.</span></p>
      <p><span data-start="00:12:41.860" data-end="00:12:44.120" data-start-seconds="761">So test in IE.</span></p>
      <p><span data-start="00:12:44.120" data-end="00:12:48.114" data-start-seconds="764">But you should not</span> <span data-start="00:12:44.120" data-end="00:12:48.114" data-start-seconds="764">be blocking the page.</span></p>
      <p><span data-start="00:12:48.114" data-end="00:12:49.780" data-start-seconds="768">If you don't have</span> <span data-start="00:12:48.114" data-end="00:12:49.780" data-start-seconds="768">defer on it, then it's</span> <span data-start="00:12:49.780" data-end="00:12:54.400" data-start-seconds="769">going to really, really impact</span> <span data-start="00:12:49.780" data-end="00:12:54.400" data-start-seconds="769">the performance of your app.</span></p>
      <p><span data-start="00:12:54.400" data-end="00:12:56.570" data-start-seconds="774">And delay loading unnecessary</span> <span data-start="00:12:54.400" data-end="00:12:56.570" data-start-seconds="774">JavaScript, things</span> <span data-start="00:12:56.570" data-end="00:12:59.830" data-start-seconds="776">like analytics, Google</span> <span data-start="00:12:56.570" data-end="00:12:59.830" data-start-seconds="776">analytics, mix panel,</span> <span data-start="00:12:59.830" data-end="00:13:01.710" data-start-seconds="779">that kind of thing.</span></p>
      <p><span data-start="00:13:01.710" data-end="00:13:04.150" data-start-seconds="781">If it's nee- needed for</span> <span data-start="00:13:01.710" data-end="00:13:04.150" data-start-seconds="781">the initial page load,</span> <span data-start="00:13:04.150" data-end="00:13:06.341" data-start-seconds="784">delay loading it.</span></p>
      <p><span data-start="00:13:06.341" data-end="00:13:06.840" data-start-seconds="786">All right.</span></p>
      <p><span data-start="00:13:06.840" data-end="00:13:09.340" data-start-seconds="786">So the network is</span> <span data-start="00:13:06.840" data-end="00:13:09.340" data-start-seconds="786">fairly straightforward.</span></p>
      <p><span data-start="00:13:09.340" data-end="00:13:11.200" data-start-seconds="789">But I want to give you</span> <span data-start="00:13:09.340" data-end="00:13:11.200" data-start-seconds="789">a few specific tips</span> <span data-start="00:13:11.200" data-end="00:13:15.610" data-start-seconds="791">that I found especially useful.</span></p>
      <p><span data-start="00:13:15.610" data-end="00:13:19.362" data-start-seconds="795">NGINX page speed is a</span> <span data-start="00:13:15.610" data-end="00:13:19.362" data-start-seconds="795">module developed by Google</span> <span data-start="00:13:19.362" data-end="00:13:21.530" data-start-seconds="799">that will automate much of</span> <span data-start="00:13:19.362" data-end="00:13:21.530" data-start-seconds="799">the network optimizations</span> <span data-start="00:13:21.530" data-end="00:13:22.947" data-start-seconds="801">you should be making.</span></p>
      <p><span data-start="00:13:22.947" data-end="00:13:24.030" data-start-seconds="802">It'll do some nice things.</span></p>
      <p><span data-start="00:13:24.030" data-end="00:13:28.473" data-start-seconds="804">It'll do things like image</span> <span data-start="00:13:24.030" data-end="00:13:28.473" data-start-seconds="804">optimization, stripping,</span> <span data-start="00:13:28.473" data-end="00:13:30.240" data-start-seconds="808">meta tags, that kind of thing.</span></p>
      <p><span data-start="00:13:30.240" data-end="00:13:32.580" data-start-seconds="810">It'll minify JavaScript.</span></p>
      <p><span data-start="00:13:32.580" data-end="00:13:35.184" data-start-seconds="812">It'll defer JavaScript.</span></p>
      <p><span data-start="00:13:35.184" data-end="00:13:38.460" data-start-seconds="815">It'll minimize images,</span> <span data-start="00:13:35.184" data-end="00:13:38.460" data-start-seconds="815">that kind of thing.</span></p>
      <p><span data-start="00:13:38.460" data-end="00:13:41.750" data-start-seconds="818">If you're using NGINX, then it's</span> <span data-start="00:13:38.460" data-end="00:13:41.750" data-start-seconds="818">no-brainer to turn this thing</span> <span data-start="00:13:41.750" data-end="00:13:42.250" data-start-seconds="821">on.</span></p>
      <p><span data-start="00:13:42.250" data-end="00:13:47.160" data-start-seconds="822">It probably will make a huge</span> <span data-start="00:13:42.250" data-end="00:13:47.160" data-start-seconds="822">performance impact on your IO.</span></p>
      <p><span data-start="00:13:47.160" data-end="00:13:48.280" data-start-seconds="827">Don't use large cookies.</span></p>
      <p><span data-start="00:13:48.280" data-end="00:13:51.240" data-start-seconds="828">This is something that</span> <span data-start="00:13:48.280" data-end="00:13:51.240" data-start-seconds="828">I have done in the past.</span></p>
      <p><span data-start="00:13:51.240" data-end="00:13:54.860" data-start-seconds="831">And it's really affected</span> <span data-start="00:13:51.240" data-end="00:13:54.860" data-start-seconds="831">the performance.</span></p>
      <p><span data-start="00:13:54.860" data-end="00:13:58.816" data-start-seconds="834">This, for example, is a</span> <span data-start="00:13:54.860" data-end="00:13:58.816" data-start-seconds="834">request to monocle that IO.</span></p>
      <p><span data-start="00:13:58.816" data-end="00:14:02.630" data-start-seconds="838">These are just the HTTP</span> <span data-start="00:13:58.816" data-end="00:14:02.630" data-start-seconds="838">headers for this request.</span></p>
      <p><span data-start="00:14:02.630" data-end="00:14:07.620" data-start-seconds="842">And here is the cookie, right?</span> <span data-start="00:14:07.620" data-end="00:14:11.210" data-start-seconds="847">This is basically</span> <span data-start="00:14:07.620" data-end="00:14:11.210" data-start-seconds="847">almost double the amount</span> <span data-start="00:14:11.210" data-end="00:14:13.780" data-start-seconds="851">of the other headers there.</span></p>
      <p><span data-start="00:14:13.780" data-end="00:14:17.570" data-start-seconds="853">And it's-- it's not compressed.</span></p>
      <p><span data-start="00:14:17.570" data-end="00:14:21.290" data-start-seconds="857">So don't store session</span> <span data-start="00:14:17.570" data-end="00:14:21.290" data-start-seconds="857">data in cookies.</span></p>
      <p><span data-start="00:14:21.290" data-end="00:14:23.070" data-start-seconds="861">Just store an ID in cookies.</span></p>
      <p><span data-start="00:14:23.070" data-end="00:14:25.170" data-start-seconds="863">And store the session</span> <span data-start="00:14:23.070" data-end="00:14:25.170" data-start-seconds="863">data on your server</span> <span data-start="00:14:25.170" data-end="00:14:28.610" data-start-seconds="865">somewhere in memory, memcached</span> <span data-start="00:14:25.170" data-end="00:14:28.610" data-start-seconds="865">perhaps, that kind of thing.</span></p>
      <p><span data-start="00:14:28.610" data-end="00:14:32.630" data-start-seconds="868">'Cause this cookie is going</span> <span data-start="00:14:28.610" data-end="00:14:32.630" data-start-seconds="868">to be on every single request</span> <span data-start="00:14:32.630" data-end="00:14:33.350" data-start-seconds="872">to your site.</span></p>
      <p><span data-start="00:14:33.350" data-end="00:14:36.690" data-start-seconds="873">Now, if you're clever, then</span> <span data-start="00:14:33.350" data-end="00:14:36.690" data-start-seconds="873">you probably put your, uh,</span> <span data-start="00:14:36.690" data-end="00:14:37.830" data-start-seconds="876">assets in a CDN.</span></p>
      <p><span data-start="00:14:37.830" data-end="00:14:39.557" data-start-seconds="877">And hopefully, you</span> <span data-start="00:14:37.830" data-end="00:14:39.557" data-start-seconds="877">won't have any cookies</span> <span data-start="00:14:39.557" data-end="00:14:40.390" data-start-seconds="879">going into your CDN.</span></p>
      <p><span data-start="00:14:40.390" data-end="00:14:50.000" data-start-seconds="880">But still-- [AUDIO OUT]</span> <span data-start="00:14:40.390" data-end="00:14:50.000" data-start-seconds="880">--JavaScript.</span></p>
      <p><span data-start="00:14:50.000" data-end="00:14:52.010" data-start-seconds="890">Now, I kind of</span> <span data-start="00:14:50.000" data-end="00:14:52.010" data-start-seconds="890">mentioned this earlier.</span></p>
      <p><span data-start="00:14:52.010" data-end="00:14:57.190" data-start-seconds="892">But you don't want to be using</span> <span data-start="00:14:52.010" data-end="00:14:57.190" data-start-seconds="892">your naked JavaScript tag.</span></p>
      <p><span data-start="00:14:57.190" data-end="00:15:02.160" data-start-seconds="897">Due to previous kind of</span> <span data-start="00:14:57.190" data-end="00:15:02.160" data-start-seconds="897">browser behavior, whenever</span> <span data-start="00:15:02.160" data-end="00:15:05.090" data-start-seconds="902">the browser gets</span> <span data-start="00:15:02.160" data-end="00:15:05.090" data-start-seconds="902">across a script tag,</span> <span data-start="00:15:05.090" data-end="00:15:07.500" data-start-seconds="905">it just stops everything,</span> <span data-start="00:15:05.090" data-end="00:15:07.500" data-start-seconds="905">loads the script tag,</span> <span data-start="00:15:07.500" data-end="00:15:12.110" data-start-seconds="907">and then continues, because</span> <span data-start="00:15:07.500" data-end="00:15:12.110" data-start-seconds="907">of things like document.write.</span></p>
      <p><span data-start="00:15:12.110" data-end="00:15:15.820" data-start-seconds="912">This day and age, no one</span> <span data-start="00:15:12.110" data-end="00:15:15.820" data-start-seconds="912">should be using document.write.</span></p>
      <p><span data-start="00:15:15.820" data-end="00:15:17.490" data-start-seconds="915">Just add defer on</span> <span data-start="00:15:15.820" data-end="00:15:17.490" data-start-seconds="915">the script tag,</span> <span data-start="00:15:17.490" data-end="00:15:22.090" data-start-seconds="917">it'll mean it'll</span> <span data-start="00:15:17.490" data-end="00:15:22.090" data-start-seconds="917">load asynchronously.</span></p>
      <p><span data-start="00:15:22.090" data-end="00:15:24.670" data-start-seconds="922">So it'll-- it'll block before</span> <span data-start="00:15:22.090" data-end="00:15:24.670" data-start-seconds="922">the page load and execute</span> <span data-start="00:15:24.670" data-end="00:15:26.110" data-start-seconds="924">before the page load.</span></p>
      <p><span data-start="00:15:26.110" data-end="00:15:30.020" data-start-seconds="926">But it won't block any</span> <span data-start="00:15:26.110" data-end="00:15:30.020" data-start-seconds="926">other resources loading.</span></p>
      <p><span data-start="00:15:30.020" data-end="00:15:31.360" data-start-seconds="930">So this is key.</span></p>
      <p><span data-start="00:15:31.360" data-end="00:15:36.690" data-start-seconds="931">And so if you're-- if you're</span> <span data-start="00:15:31.360" data-end="00:15:36.690" data-start-seconds="931">preloading data and so you want</span> <span data-start="00:15:36.690" data-end="00:15:40.650" data-start-seconds="936">this data to be available</span> <span data-start="00:15:36.690" data-end="00:15:40.650" data-start-seconds="936">on the initial page load,</span> <span data-start="00:15:40.650" data-end="00:15:45.560" data-start-seconds="940">then you're going to have to put</span> <span data-start="00:15:40.650" data-end="00:15:45.560" data-start-seconds="940">that data inside of a separate</span> <span data-start="00:15:45.560" data-end="00:15:46.570" data-start-seconds="945">JavaScript.</span></p>
      <p><span data-start="00:15:46.570" data-end="00:15:50.930" data-start-seconds="946">Like I say, you don't want to</span> <span data-start="00:15:46.570" data-end="00:15:50.930" data-start-seconds="946">be doing any SQL requests or SQL</span> <span data-start="00:15:50.930" data-end="00:15:54.710" data-start-seconds="950">queries on the initial page.</span></p>
      <p><span data-start="00:15:54.710" data-end="00:15:56.950" data-start-seconds="954">So you need to put it</span> <span data-start="00:15:54.710" data-end="00:15:56.950" data-start-seconds="954">in the setup.js file.</span></p>
      <p><span data-start="00:15:56.950" data-end="00:15:59.322" data-start-seconds="956">This is a little pattern I use.</span></p>
      <p><span data-start="00:15:59.322" data-end="00:16:05.770" data-start-seconds="959">Um, so you will require this</span> <span data-start="00:15:59.322" data-end="00:16:05.770" data-start-seconds="959">on your index.html page.</span></p>
      <p><span data-start="00:16:05.770" data-end="00:16:08.130" data-start-seconds="965">And setup.js is not</span></p>
      <p><span data-start="00:16:05.770" data-end="00:16:08.130" data-start-seconds="965">actually JS script.</span></p>
      <p><span data-start="00:16:08.130" data-end="00:16:10.830" data-start-seconds="968">It's actually-- this</span> <span data-start="00:16:08.130" data-end="00:16:10.830" data-start-seconds="968">is a bit of Sinatra.</span></p>
      <p><span data-start="00:16:10.830" data-end="00:16:13.900" data-start-seconds="970">It's actually an</span> <span data-start="00:16:10.830" data-end="00:16:13.900" data-start-seconds="970">action in your web app.</span></p>
      <p><span data-start="00:16:13.900" data-end="00:16:18.110" data-start-seconds="973">And it'll basically</span> <span data-start="00:16:13.900" data-end="00:16:18.110" data-start-seconds="973">put-- do the SQL queries</span> <span data-start="00:16:18.110" data-end="00:16:19.390" data-start-seconds="978">that it needs to do.</span></p>
      <p><span data-start="00:16:19.390" data-end="00:16:21.260" data-start-seconds="979">It'll populate that JavaScript.</span></p>
      <p><span data-start="00:16:21.260" data-end="00:16:23.810" data-start-seconds="981">It'll return that JavaScript,</span> <span data-start="00:16:21.260" data-end="00:16:23.810" data-start-seconds="981">the JavaScript executed</span> <span data-start="00:16:23.810" data-end="00:16:24.870" data-start-seconds="983">on the client.</span></p>
      <p><span data-start="00:16:24.870" data-end="00:16:28.590" data-start-seconds="984">But the key thing here is this</span> <span data-start="00:16:24.870" data-end="00:16:28.590" data-start-seconds="984">is not on the initial page.</span></p>
      <p><span data-start="00:16:28.590" data-end="00:16:30.460" data-start-seconds="988">This is not on the</span> <span data-start="00:16:28.590" data-end="00:16:30.460" data-start-seconds="988">initial request.</span></p>
      <p><span data-start="00:16:30.460" data-end="00:16:32.670" data-start-seconds="990">So this is not slowing</span> <span data-start="00:16:30.460" data-end="00:16:32.670" data-start-seconds="990">down the initial request.</span></p>
      <p><span data-start="00:16:32.670" data-end="00:16:35.890" data-start-seconds="992">Because you want the browser</span> <span data-start="00:16:32.670" data-end="00:16:35.890" data-start-seconds="992">to be able to say, OK, now</span> <span data-start="00:16:35.890" data-end="00:16:38.440" data-start-seconds="995">we have all the resources.</span></p>
      <p><span data-start="00:16:38.440" data-end="00:16:41.125" data-start-seconds="998">We can go and fetch</span> <span data-start="00:16:38.440" data-end="00:16:41.125" data-start-seconds="998">all the assets we need.</span></p>
      <p><span data-start="00:16:41.125" data-end="00:16:44.604" data-start-seconds="1001">setup.js is one of those.</span></p>
      <p><span data-start="00:16:44.604" data-end="00:16:47.430" data-start-seconds="1004">So, Steve kind of</span> <span data-start="00:16:44.604" data-end="00:16:47.430" data-start-seconds="1004">covered this earlier.</span></p>
      <p><span data-start="00:16:47.430" data-end="00:16:55.280" data-start-seconds="1007">But there's a bunch of meta tags</span> <span data-start="00:16:47.430" data-end="00:16:55.280" data-start-seconds="1007">you can use to prefetch stuff.</span></p>
      <p><span data-start="00:16:55.280" data-end="00:16:59.540" data-start-seconds="1015">And so DNS prefetch we're</span> <span data-start="00:16:55.280" data-end="00:16:59.540" data-start-seconds="1015">going to do and DNS resolution.</span></p>
      <p><span data-start="00:16:59.540" data-end="00:17:03.740" data-start-seconds="1019">Prefetch will actually go and</span> <span data-start="00:16:59.540" data-end="00:17:03.740" data-start-seconds="1019">fetch the page and its assets.</span></p>
      <p><span data-start="00:17:03.740" data-end="00:17:08.040" data-start-seconds="1023">Prerender will actually</span> <span data-start="00:17:03.740" data-end="00:17:08.040" data-start-seconds="1023">prerender the page.</span></p>
      <p><span data-start="00:17:08.040" data-end="00:17:10.310" data-start-seconds="1028">And you can actually do</span> <span data-start="00:17:08.040" data-end="00:17:10.310" data-start-seconds="1028">this programmatically.</span></p>
      <p><span data-start="00:17:10.310" data-end="00:17:13.960" data-start-seconds="1030">You can just append it</span> <span data-start="00:17:10.310" data-end="00:17:13.960" data-start-seconds="1030">to your body like this.</span></p>
      <p><span data-start="00:17:13.960" data-end="00:17:17.630" data-start-seconds="1033">And Chrome will go</span> <span data-start="00:17:13.960" data-end="00:17:17.630" data-start-seconds="1033">ahead and prerender it.</span></p>
      <p><span data-start="00:17:17.630" data-end="00:17:20.199" data-start-seconds="1037">For example, in</span> <span data-start="00:17:17.630" data-end="00:17:20.199" data-start-seconds="1037">Monocle, which is, like,</span> <span data-start="00:17:20.199" data-end="00:17:23.598" data-start-seconds="1040">a sort of social news site,</span> <span data-start="00:17:20.199" data-end="00:17:23.598" data-start-seconds="1040">when someone is hovering</span> <span data-start="00:17:23.598" data-end="00:17:25.960" data-start-seconds="1043">over a link for more</span> <span data-start="00:17:23.598" data-end="00:17:25.960" data-start-seconds="1043">than a few seconds,</span> <span data-start="00:17:25.960" data-end="00:17:28.590" data-start-seconds="1045">I go ahead and</span> <span data-start="00:17:25.960" data-end="00:17:28.590" data-start-seconds="1045">prerender that page.</span></p>
      <p><span data-start="00:17:28.590" data-end="00:17:31.030" data-start-seconds="1048">That means that whenever</span> <span data-start="00:17:28.590" data-end="00:17:31.030" data-start-seconds="1048">they click on that link,</span> <span data-start="00:17:31.030" data-end="00:17:33.340" data-start-seconds="1051">that page will be</span> <span data-start="00:17:31.030" data-end="00:17:33.340" data-start-seconds="1051">loaded in instantly.</span></p>
      <p><span data-start="00:17:33.340" data-end="00:17:38.660" data-start-seconds="1053">And you can actually see pages</span> <span data-start="00:17:33.340" data-end="00:17:38.660" data-start-seconds="1053">being preloaded inside, uh,</span> <span data-start="00:17:38.660" data-end="00:17:42.024" data-start-seconds="1058">Google-- Google</span> <span data-start="00:17:38.660" data-end="00:17:42.024" data-start-seconds="1058">Chrome's Task Manager.</span></p>
      <p><span data-start="00:17:42.024" data-end="00:17:43.440" data-start-seconds="1062">This is basically</span> <span data-start="00:17:42.024" data-end="00:17:43.440" data-start-seconds="1062">the only way you</span> <span data-start="00:17:43.440" data-end="00:17:46.764" data-start-seconds="1063">can see if a page is</span> <span data-start="00:17:43.440" data-end="00:17:46.764" data-start-seconds="1063">actually being preloaded.</span></p>
      <p><span data-start="00:17:46.764" data-end="00:17:48.180" data-start-seconds="1066">But it's worth</span> <span data-start="00:17:46.764" data-end="00:17:48.180" data-start-seconds="1066">noting you can only</span> <span data-start="00:17:48.180" data-end="00:17:52.200" data-start-seconds="1068">prerender one page at a time.</span></p>
      <p><span data-start="00:17:52.200" data-end="00:17:54.610" data-start-seconds="1072">And if you try and</span> <span data-start="00:17:52.200" data-end="00:17:54.610" data-start-seconds="1072">prerender another page,</span> <span data-start="00:17:54.610" data-end="00:17:58.660" data-start-seconds="1074">then it'll-- it'll</span> <span data-start="00:17:54.610" data-end="00:17:58.660" data-start-seconds="1074">replace this page.</span></p>
      <p><span data-start="00:17:58.660" data-end="00:18:00.420" data-start-seconds="1078">So now, we've talked</span> <span data-start="00:17:58.660" data-end="00:18:00.420" data-start-seconds="1078">a lot about network.</span></p>
      <p><span data-start="00:18:00.420" data-end="00:18:02.890" data-start-seconds="1080">I want to talk about rendering.</span></p>
      <p><span data-start="00:18:02.890" data-end="00:18:05.100" data-start-seconds="1082">And rendering is</span> <span data-start="00:18:02.890" data-end="00:18:05.100" data-start-seconds="1082">often unoptimized</span> <span data-start="00:18:05.100" data-end="00:18:07.220" data-start-seconds="1085">and is often less talked about.</span></p>
      <p><span data-start="00:18:07.220" data-end="00:18:11.050" data-start-seconds="1087">But it's basically the other</span> <span data-start="00:18:07.220" data-end="00:18:11.050" data-start-seconds="1087">bottleneck to your initial page</span> <span data-start="00:18:11.050" data-end="00:18:11.772" data-start-seconds="1091">request.</span></p>
      <p><span data-start="00:18:11.772" data-end="00:18:13.480" data-start-seconds="1091">And you can't really</span> <span data-start="00:18:11.772" data-end="00:18:13.480" data-start-seconds="1091">talk about rendering</span> <span data-start="00:18:13.480" data-end="00:18:15.820" data-start-seconds="1093">without talking about reflows.</span></p>
      <p><span data-start="00:18:15.820" data-end="00:18:17.570" data-start-seconds="1095">So a reflowing and a</span> <span data-start="00:18:15.820" data-end="00:18:17.570" data-start-seconds="1095">web browser are first</span> <span data-start="00:18:17.570" data-end="00:18:19.740" data-start-seconds="1097">the process where the</span> <span data-start="00:18:17.570" data-end="00:18:19.740" data-start-seconds="1097">rendering engine calculates</span> <span data-start="00:18:19.740" data-end="00:18:22.990" data-start-seconds="1099">positions and geometries</span> <span data-start="00:18:19.740" data-end="00:18:22.990" data-start-seconds="1099">of the various elements</span> <span data-start="00:18:22.990" data-end="00:18:24.350" data-start-seconds="1102">in the document.</span></p>
      <p><span data-start="00:18:24.350" data-end="00:18:26.370" data-start-seconds="1104">So in other words,</span> <span data-start="00:18:24.350" data-end="00:18:26.370" data-start-seconds="1104">it figures out</span> <span data-start="00:18:26.370" data-end="00:18:29.080" data-start-seconds="1106">how elements should be</span> <span data-start="00:18:26.370" data-end="00:18:29.080" data-start-seconds="1106">displayed before the paint.</span></p>
      <p><span data-start="00:18:29.080" data-end="00:18:32.190" data-start-seconds="1109">And some browsers</span> <span data-start="00:18:29.080" data-end="00:18:32.190" data-start-seconds="1109">call this reflow.</span></p>
      <p><span data-start="00:18:32.190" data-end="00:18:34.120" data-start-seconds="1112">Some browsers call</span> <span data-start="00:18:32.190" data-end="00:18:34.120" data-start-seconds="1112">this a redraw.</span></p>
      <p><span data-start="00:18:34.120" data-end="00:18:35.536" data-start-seconds="1114">It's just-- it's</span> <span data-start="00:18:34.120" data-end="00:18:35.536" data-start-seconds="1114">just terminology.</span></p>
      <p><span data-start="00:18:38.090" data-end="00:18:45.110" data-start-seconds="1118">And this is an example of Ge--</span> <span data-start="00:18:38.090" data-end="00:18:45.110" data-start-seconds="1118">Gecko rendering the Mozilla.org</span></p>
      <p><span data-start="00:18:45.110" data-end="00:18:46.030" data-start-seconds="1125">homepage.</span></p>
      <p><span data-start="00:18:46.030" data-end="00:18:51.690" data-start-seconds="1126">It's calculating the layout and</span> <span data-start="00:18:46.030" data-end="00:18:51.690" data-start-seconds="1126">positions of all the elements.</span></p>
      <p><span data-start="00:18:51.690" data-end="00:18:56.410" data-start-seconds="1131">So you can see all those</span> <span data-start="00:18:51.690" data-end="00:18:56.410" data-start-seconds="1131">elements being calculated.</span></p>
      <p><span data-start="00:18:56.410" data-end="00:19:02.440" data-start-seconds="1136">And then notice, everything</span> <span data-start="00:18:56.410" data-end="00:19:02.440" data-start-seconds="1136">is being recalculated again.</span></p>
      <p><span data-start="00:19:02.440" data-end="00:19:06.730" data-start-seconds="1142">At about 16 seconds</span> <span data-start="00:19:02.440" data-end="00:19:06.730" data-start-seconds="1142">through that video, um,</span> <span data-start="00:19:06.730" data-end="00:19:08.730" data-start-seconds="1146">something happened which</span> <span data-start="00:19:06.730" data-end="00:19:08.730" data-start-seconds="1146">invalidates the layout.</span></p>
      <p><span data-start="00:19:08.730" data-end="00:19:12.290" data-start-seconds="1148">It means-- it means it had to</span> <span data-start="00:19:08.730" data-end="00:19:12.290" data-start-seconds="1148">recalculate the whole thing.</span></p>
      <p><span data-start="00:19:12.290" data-end="00:19:15.110" data-start-seconds="1152">And this is the kind of</span> <span data-start="00:19:12.290" data-end="00:19:15.110" data-start-seconds="1152">thing we want to avoid.</span></p>
      <p><span data-start="00:19:15.110" data-end="00:19:17.130" data-start-seconds="1155">This is the kind of</span> <span data-start="00:19:15.110" data-end="00:19:17.130" data-start-seconds="1155">reflow optimizations</span> <span data-start="00:19:17.130" data-end="00:19:19.040" data-start-seconds="1157">we want to be making.</span></p>
      <p><span data-start="00:19:19.040" data-end="00:19:21.630" data-start-seconds="1159">So what really</span> <span data-start="00:19:19.040" data-end="00:19:21.630" data-start-seconds="1159">triggers a reflow?</span> <span data-start="00:19:21.630" data-end="00:19:23.070" data-start-seconds="1161">Well, a lot of things do.</span></p>
      <p><span data-start="00:19:23.070" data-end="00:19:24.680" data-start-seconds="1163">Basically, interacting</span> <span data-start="00:19:23.070" data-end="00:19:24.680" data-start-seconds="1163">with the DOM</span> <span data-start="00:19:24.680" data-end="00:19:29.550" data-start-seconds="1164">does, adding, removing,</span> <span data-start="00:19:24.680" data-end="00:19:29.550" data-start-seconds="1164">showing, hiding DOM elements,</span> <span data-start="00:19:29.550" data-end="00:19:32.990" data-start-seconds="1169">scrolling, resizing,</span> <span data-start="00:19:29.550" data-end="00:19:32.990" data-start-seconds="1169">adding classes.</span></p>
      <p><span data-start="00:19:32.990" data-end="00:19:38.130" data-start-seconds="1172">In fact, all these properties</span> <span data-start="00:19:32.990" data-end="00:19:38.130" data-start-seconds="1172">here trigger reflows.</span></p>
      <p><span data-start="00:19:38.130" data-end="00:19:41.760" data-start-seconds="1178">And basically, you want</span> <span data-start="00:19:38.130" data-end="00:19:41.760" data-start-seconds="1178">to access these properties</span> <span data-start="00:19:41.760" data-end="00:19:42.340" data-start-seconds="1181">sparingly.</span></p>
      <p><span data-start="00:19:42.340" data-end="00:19:46.310" data-start-seconds="1182">Because they're all going</span> <span data-start="00:19:42.340" data-end="00:19:46.310" data-start-seconds="1182">to be very expensive.</span></p>
      <p><span data-start="00:19:46.310" data-end="00:19:48.040" data-start-seconds="1186">So reflows are often expensive.</span></p>
      <p><span data-start="00:19:48.040" data-end="00:19:50.870" data-start-seconds="1188">But you can reduce their impact.</span></p>
      <p><span data-start="00:19:50.870" data-end="00:19:52.550" data-start-seconds="1190">And the three places</span> <span data-start="00:19:50.870" data-end="00:19:52.550" data-start-seconds="1190">where you really</span> <span data-start="00:19:52.550" data-end="00:19:58.180" data-start-seconds="1192">notice reflows is the first</span> <span data-start="00:19:52.550" data-end="00:19:58.180" data-start-seconds="1192">page load, animation loops,</span> <span data-start="00:19:58.180" data-end="00:20:00.150" data-start-seconds="1198">and, uh, scrolling.</span></p>
      <p><span data-start="00:20:00.150" data-end="00:20:03.110" data-start-seconds="1200">So we really need to</span> <span data-start="00:20:00.150" data-end="00:20:03.110" data-start-seconds="1200">optimize all three use cases,</span> <span data-start="00:20:03.110" data-end="00:20:05.990" data-start-seconds="1203">make sure they're</span> <span data-start="00:20:03.110" data-end="00:20:05.990" data-start-seconds="1203">as fast as possible.</span></p>
      <p><span data-start="00:20:05.990" data-end="00:20:10.950" data-start-seconds="1205">So one tip for making--</span> <span data-start="00:20:05.990" data-end="00:20:10.950" data-start-seconds="1205">optimizing reflows</span> <span data-start="00:20:10.950" data-end="00:20:15.557" data-start-seconds="1210">is to change classes in the</span> <span data-start="00:20:10.950" data-end="00:20:15.557" data-start-seconds="1210">DOM tree as low as possible.</span></p>
      <p><span data-start="00:20:15.557" data-end="00:20:17.390" data-start-seconds="1215">Now, this will limit</span> <span data-start="00:20:15.557" data-end="00:20:17.390" data-start-seconds="1215">the scope of the reflow</span> <span data-start="00:20:17.390" data-end="00:20:19.410" data-start-seconds="1217">to as few notes as possible.</span></p>
      <p><span data-start="00:20:19.410" data-end="00:20:23.300" data-start-seconds="1219">And hopefully, it won't</span> <span data-start="00:20:19.410" data-end="00:20:23.300" data-start-seconds="1219">do a full document reload.</span></p>
      <p><span data-start="00:20:23.300" data-end="00:20:25.680" data-start-seconds="1223">You want to avoid DOM thrashing.</span></p>
      <p><span data-start="00:20:25.680" data-end="00:20:29.292" data-start-seconds="1225">Basically, what this means is</span> <span data-start="00:20:25.680" data-end="00:20:29.292" data-start-seconds="1225">if you do a read from the DOM,</span> <span data-start="00:20:29.292" data-end="00:20:30.750" data-start-seconds="1229">and then you do a</span> <span data-start="00:20:29.292" data-end="00:20:30.750" data-start-seconds="1229">write to the Dom,</span> <span data-start="00:20:30.750" data-end="00:20:33.520" data-start-seconds="1230">and then you read from the DOM,</span> <span data-start="00:20:30.750" data-end="00:20:33.520" data-start-seconds="1230">and then a write to the DOM.</span></p>
      <p><span data-start="00:20:33.520" data-end="00:20:36.770" data-start-seconds="1233">You're going to do</span> <span data-start="00:20:33.520" data-end="00:20:36.770" data-start-seconds="1233">multiple reflows in there</span> <span data-start="00:20:36.770" data-end="00:20:37.990" data-start-seconds="1236">for no good reason.</span></p>
      <p><span data-start="00:20:37.990" data-end="00:20:44.206" data-start-seconds="1237">So what you can do is batch</span> <span data-start="00:20:37.990" data-end="00:20:44.206" data-start-seconds="1237">up your reads and your writes.</span></p>
      <p><span data-start="00:20:44.206" data-end="00:20:47.000" data-start-seconds="1244">This will only cause one reflow.</span></p>
      <p><span data-start="00:20:47.000" data-end="00:20:49.364" data-start-seconds="1247">Another option is to</span> <span data-start="00:20:47.000" data-end="00:20:49.364" data-start-seconds="1247">actually put all your writes</span> <span data-start="00:20:49.364" data-end="00:20:50.488" data-start-seconds="1249">in a requestAnimationFrame.</span></p>
      <p><span data-start="00:20:52.915" data-end="00:20:54.790" data-start-seconds="1252">And this is just a bit</span> <span data-start="00:20:52.915" data-end="00:20:54.790" data-start-seconds="1252">nicer for the browser.</span></p>
      <p><span data-start="00:20:54.790" data-end="00:20:56.530" data-start-seconds="1254">Because the browser</span> <span data-start="00:20:54.790" data-end="00:20:56.530" data-start-seconds="1254">can then execute that</span> <span data-start="00:20:56.530" data-end="00:20:59.684" data-start-seconds="1256">requestAnimationFrame whenever</span> <span data-start="00:20:56.530" data-end="00:20:59.684" data-start-seconds="1256">it's convenient for them--</span> <span data-start="00:20:59.684" data-end="00:21:00.350" data-start-seconds="1259">for the browser.</span></p>
      <p><span data-start="00:21:00.350" data-end="00:21:03.310" data-start-seconds="1260">And hopefully, it'll be</span> <span data-start="00:21:00.350" data-end="00:21:03.310" data-start-seconds="1260">convenient in the whole paint</span> <span data-start="00:21:03.310" data-end="00:21:04.880" data-start-seconds="1263">cycle.</span></p>
      <p><span data-start="00:21:04.880" data-end="00:21:07.295" data-start-seconds="1264">This is another example</span> <span data-start="00:21:04.880" data-end="00:21:07.295" data-start-seconds="1264">of inefficient code.</span></p>
      <p><span data-start="00:21:07.295" data-end="00:21:12.730" data-start-seconds="1267">You're appending three</span> <span data-start="00:21:07.295" data-end="00:21:12.730" data-start-seconds="1267">elements to this element one.</span></p>
      <p><span data-start="00:21:12.730" data-end="00:21:16.190" data-start-seconds="1272">Now, this is going to</span> <span data-start="00:21:12.730" data-end="00:21:16.190" data-start-seconds="1272">cause three reflows.</span></p>
      <p><span data-start="00:21:16.190" data-end="00:21:18.620" data-start-seconds="1276">So what you really</span> <span data-start="00:21:16.190" data-end="00:21:18.620" data-start-seconds="1276">want to do is actually</span> <span data-start="00:21:18.620" data-end="00:21:21.760" data-start-seconds="1278">append all those elements</span> <span data-start="00:21:18.620" data-end="00:21:21.760" data-start-seconds="1278">to a document fragment,</span> <span data-start="00:21:21.760" data-end="00:21:24.350" data-start-seconds="1281">and then append that document</span> <span data-start="00:21:21.760" data-end="00:21:24.350" data-start-seconds="1281">fragment to the page.</span></p>
      <p><span data-start="00:21:24.350" data-end="00:21:26.550" data-start-seconds="1284">You're kind of batching</span> <span data-start="00:21:24.350" data-end="00:21:26.550" data-start-seconds="1284">up DOM changes.</span></p>
      <p><span data-start="00:21:26.550" data-end="00:21:29.499" data-start-seconds="1286">And that will only</span> <span data-start="00:21:26.550" data-end="00:21:29.499" data-start-seconds="1286">cause one reflow.</span></p>
      <p><span data-start="00:21:29.499" data-end="00:21:31.040" data-start-seconds="1289">And then the fastest</span> <span data-start="00:21:29.499" data-end="00:21:31.040" data-start-seconds="1289">thing you can do</span> <span data-start="00:21:31.040" data-end="00:21:35.130" data-start-seconds="1291">is just actually set the</span> <span data-start="00:21:31.040" data-end="00:21:35.130" data-start-seconds="1291">inner HTML of an element.</span></p>
      <p><span data-start="00:21:35.130" data-end="00:21:36.730" data-start-seconds="1295">And you can see</span> <span data-start="00:21:35.130" data-end="00:21:36.730" data-start-seconds="1295">before and after.</span></p>
      <p><span data-start="00:21:36.730" data-end="00:21:41.677" data-start-seconds="1296">Before, in Chrome's Inspector, you can</span> <span data-start="00:21:36.730" data-end="00:21:41.677" data-start-seconds="1296">see all the reflows going on.</span></p>
      <p><span data-start="00:21:41.677" data-end="00:21:42.760" data-start-seconds="1301">They're kind of expensive.</span></p>
      <p><span data-start="00:21:42.760" data-end="00:21:47.720" data-start-seconds="1302">After, we've got rid</span> <span data-start="00:21:42.760" data-end="00:21:47.720" data-start-seconds="1302">of almost all of them.</span></p>
      <p><span data-start="00:21:47.720" data-end="00:21:50.375" data-start-seconds="1307">So if you are doing</span> <span data-start="00:21:47.720" data-end="00:21:50.375" data-start-seconds="1307">animation loops,</span> <span data-start="00:21:50.375" data-end="00:21:52.290" data-start-seconds="1310">use requestAnimationFrame.</span></p>
      <p><span data-start="00:21:52.290" data-end="00:21:56.160" data-start-seconds="1312">Don't use setTimeout</span> <span data-start="00:21:52.290" data-end="00:21:56.160" data-start-seconds="1312">or setInterval.</span></p>
      <p><span data-start="00:21:56.160" data-end="00:21:59.860" data-start-seconds="1316">The thing is the browser</span> <span data-start="00:21:56.160" data-end="00:21:59.860" data-start-seconds="1316">needs to refresh or paint</span> <span data-start="00:21:59.860" data-end="00:22:03.650" data-start-seconds="1319">about 60 times-- 60 Hertz.</span></p>
      <p><span data-start="00:22:03.650" data-end="00:22:07.610" data-start-seconds="1323">And if you-- if you</span> <span data-start="00:22:03.650" data-end="00:22:07.610" data-start-seconds="1323">are slowing that down,</span> <span data-start="00:22:07.610" data-end="00:22:09.930" data-start-seconds="1327">then it's going to be</span> <span data-start="00:22:07.610" data-end="00:22:09.930" data-start-seconds="1327">really useful-- noticeable</span> <span data-start="00:22:09.930" data-end="00:22:10.980" data-start-seconds="1329">to the user.</span></p>
      <p><span data-start="00:22:10.980" data-end="00:22:13.460" data-start-seconds="1330">When you're setting--</span> <span data-start="00:22:10.980" data-end="00:22:13.460" data-start-seconds="1330">creating a set interval loop,</span> <span data-start="00:22:13.460" data-end="00:22:17.027" data-start-seconds="1333">it's very difficult to know</span> <span data-start="00:22:13.460" data-end="00:22:17.027" data-start-seconds="1333">what is the right interval.</span></p>
      <p><span data-start="00:22:17.027" data-end="00:22:18.610" data-start-seconds="1337">Because if it's too</span> <span data-start="00:22:17.027" data-end="00:22:18.610" data-start-seconds="1337">small, then you're</span> <span data-start="00:22:18.610" data-end="00:22:21.875" data-start-seconds="1338">going to do work that never</span> <span data-start="00:22:18.610" data-end="00:22:21.875" data-start-seconds="1338">ever gets painted to the screen.</span></p>
      <p><span data-start="00:22:21.875" data-end="00:22:24.900" data-start-seconds="1341">And if it's too long,</span> <span data-start="00:22:21.875" data-end="00:22:24.900" data-start-seconds="1341">then your animation</span> <span data-start="00:22:24.900" data-end="00:22:26.090" data-start-seconds="1344">will be really [INAUDIBLE].</span></p>
      <p><span data-start="00:22:26.090" data-end="00:22:31.010" data-start-seconds="1346">So the obvious answer is</span> <span data-start="00:22:26.090" data-end="00:22:31.010" data-start-seconds="1346">don't use setInterval, use</span> <span data-start="00:22:31.010" data-end="00:22:33.790" data-start-seconds="1351">requestAnimationFrame.</span></p>
      <p><span data-start="00:22:33.790" data-end="00:22:37.330" data-start-seconds="1353">And you can actually just</span> <span data-start="00:22:33.790" data-end="00:22:37.330" data-start-seconds="1353">shim this in all the browsers.</span></p>
      <p><span data-start="00:22:37.330" data-end="00:22:39.920" data-start-seconds="1357">This device is not really</span> <span data-start="00:22:37.330" data-end="00:22:39.920" data-start-seconds="1357">limited animation loads.</span></p>
      <p><span data-start="00:22:39.920" data-end="00:22:43.180" data-start-seconds="1359">If you're deferring any kind</span> <span data-start="00:22:39.920" data-end="00:22:43.180" data-start-seconds="1359">of rendering, really, use it.</span></p>
      <p><span data-start="00:22:43.180" data-end="00:22:46.390" data-start-seconds="1363">It's much kinder to the browser.</span></p>
      <p><span data-start="00:22:46.390" data-end="00:22:48.160" data-start-seconds="1366">You should debounce</span> <span data-start="00:22:46.390" data-end="00:22:48.160" data-start-seconds="1366">scroll events.</span></p>
      <p><span data-start="00:22:48.160" data-end="00:22:51.130" data-start-seconds="1368">Now, scroll events have</span> <span data-start="00:22:48.160" data-end="00:22:51.130" data-start-seconds="1368">to be as fast as possible.</span></p>
      <p><span data-start="00:22:51.130" data-end="00:22:54.020" data-start-seconds="1371">Or event handlers have to</span> <span data-start="00:22:51.130" data-end="00:22:54.020" data-start-seconds="1371">be as fast as possible.</span></p>
      <p><span data-start="00:22:54.020" data-end="00:22:56.150" data-start-seconds="1374">When you're listening</span> <span data-start="00:22:54.020" data-end="00:22:56.150" data-start-seconds="1374">to scroll events,</span> <span data-start="00:22:56.150" data-end="00:22:59.140" data-start-seconds="1376">those things get fired a lot.</span></p>
      <p><span data-start="00:22:59.140" data-end="00:23:01.790" data-start-seconds="1379">And so you don't-- you probably</span> <span data-start="00:22:59.140" data-end="00:23:01.790" data-start-seconds="1379">don't want to listen to every</span> <span data-start="00:23:01.790" data-end="00:23:04.440" data-start-seconds="1381">single firing of that event.</span></p>
      <p><span data-start="00:23:04.440" data-end="00:23:06.960" data-start-seconds="1384">So what you can do is you</span> <span data-start="00:23:04.440" data-end="00:23:06.960" data-start-seconds="1384">can write this nice debounce</span> <span data-start="00:23:06.960" data-end="00:23:08.420" data-start-seconds="1386">function.</span></p>
      <p><span data-start="00:23:08.420" data-end="00:23:12.050" data-start-seconds="1388">This will make sure that even</span> <span data-start="00:23:08.420" data-end="00:23:12.050" data-start-seconds="1388">if you call this function 1,000</span> <span data-start="00:23:12.050" data-end="00:23:16.770" data-start-seconds="1392">times, it'll only be called</span> <span data-start="00:23:12.050" data-end="00:23:16.770" data-start-seconds="1392">once until there's a pause.</span></p>
      <p><span data-start="00:23:16.770" data-end="00:23:21.450" data-start-seconds="1396">In this case, the default</span> <span data-start="00:23:16.770" data-end="00:23:21.450" data-start-seconds="1396">is 300 milliseconds.</span></p>
      <p><span data-start="00:23:21.450" data-end="00:23:25.970" data-start-seconds="1401">And then in a-- when you're</span> <span data-start="00:23:21.450" data-end="00:23:25.970" data-start-seconds="1401">adding a scroll event listener,</span> <span data-start="00:23:25.970" data-end="00:23:29.275" data-start-seconds="1405">you can just wrap</span> <span data-start="00:23:25.970" data-end="00:23:29.275" data-start-seconds="1405">it in a debounce.</span></p>
      <p><span data-start="00:23:29.275" data-end="00:23:30.650" data-start-seconds="1409">Now, you want to</span> <span data-start="00:23:29.275" data-end="00:23:30.650" data-start-seconds="1409">make-- you still</span> <span data-start="00:23:30.650" data-end="00:23:33.120" data-start-seconds="1410">want to make sure you're</span> <span data-start="00:23:30.650" data-end="00:23:33.120" data-start-seconds="1410">on scroll event listener is</span> <span data-start="00:23:33.120" data-end="00:23:34.950" data-start-seconds="1413">as fast as possible.</span></p>
      <p><span data-start="00:23:34.950" data-end="00:23:38.255" data-start-seconds="1414">And you may even want to put</span> <span data-start="00:23:34.950" data-end="00:23:38.255" data-start-seconds="1414">that, any rendering it does,</span> <span data-start="00:23:38.255" data-end="00:23:41.190" data-start-seconds="1418">in a requestAnimationFrame.</span></p>
      <p><span data-start="00:23:41.190" data-end="00:23:44.690" data-start-seconds="1421">So be careful with</span> <span data-start="00:23:41.190" data-end="00:23:44.690" data-start-seconds="1421">onbeforeunload.</span></p>
      <p><span data-start="00:23:44.690" data-end="00:23:49.095" data-start-seconds="1424">Now, this is very</span> <span data-start="00:23:44.690" data-end="00:23:49.095" data-start-seconds="1424">useful technique</span> <span data-start="00:23:49.095" data-end="00:23:52.400" data-start-seconds="1429">to basically warn the user</span> <span data-start="00:23:49.095" data-end="00:23:52.400" data-start-seconds="1429">when there are-- perhaps</span> <span data-start="00:23:52.400" data-end="00:23:57.670" data-start-seconds="1432">there are pending AJAX requests</span> <span data-start="00:23:52.400" data-end="00:23:57.670" data-start-seconds="1432">or data hasn't been saved.</span></p>
      <p><span data-start="00:23:57.670" data-end="00:23:59.810" data-start-seconds="1437">And onbeforeunload</span> <span data-start="00:23:57.670" data-end="00:23:59.810" data-start-seconds="1437">is an event that's</span> <span data-start="00:23:59.810" data-end="00:24:03.100" data-start-seconds="1439">fired as soon as</span> <span data-start="00:23:59.810" data-end="00:24:03.100" data-start-seconds="1439">you navigate away</span> <span data-start="00:24:03.100" data-end="00:24:05.700" data-start-seconds="1443">from the site to another page.</span></p>
      <p><span data-start="00:24:05.700" data-end="00:24:07.670" data-start-seconds="1445">Now, the thing about</span> <span data-start="00:24:05.700" data-end="00:24:07.670" data-start-seconds="1445">onbeforeunload,</span> <span data-start="00:24:07.670" data-end="00:24:12.760" data-start-seconds="1447">is if you have it set, it really</span> <span data-start="00:24:07.670" data-end="00:24:12.760" data-start-seconds="1447">messes up Chrome's caching,</span> <span data-start="00:24:12.760" data-end="00:24:14.660" data-start-seconds="1452">which is a kind of bug.</span></p>
      <p><span data-start="00:24:14.660" data-end="00:24:17.830" data-start-seconds="1454">But there's no way to work</span> <span data-start="00:24:14.660" data-end="00:24:17.830" data-start-seconds="1454">around it at the moment.</span></p>
      <p><span data-start="00:24:17.830" data-end="00:24:20.730" data-start-seconds="1457">So, basically, only</span> <span data-start="00:24:17.830" data-end="00:24:20.730" data-start-seconds="1457">set onbeforeunload</span> <span data-start="00:24:20.730" data-end="00:24:22.730" data-start-seconds="1460">when you need it.</span></p>
      <p><span data-start="00:24:22.730" data-end="00:24:25.660" data-start-seconds="1462">So you can see here,</span> <span data-start="00:24:22.730" data-end="00:24:25.660" data-start-seconds="1462">we have a handler which</span> <span data-start="00:24:25.660" data-end="00:24:27.630" data-start-seconds="1465">sets the onbeforeunload</span> <span data-start="00:24:25.660" data-end="00:24:27.630" data-start-seconds="1465">and remove</span> <span data-start="00:24:27.630" data-end="00:24:30.150" data-start-seconds="1467">handler, which removes it.</span></p>
      <p><span data-start="00:24:30.150" data-end="00:24:34.490" data-start-seconds="1470">And then you can see it in a</span> <span data-start="00:24:30.150" data-end="00:24:34.490" data-start-seconds="1470">greater context with jQuery.</span></p>
      <p><span data-start="00:24:34.490" data-end="00:24:37.890" data-start-seconds="1474">You can see we're using the</span> <span data-start="00:24:34.490" data-end="00:24:37.890" data-start-seconds="1474">global event handlers whenever</span> <span data-start="00:24:37.890" data-end="00:24:39.050" data-start-seconds="1477">there's an Ajax request.</span></p>
      <p><span data-start="00:24:39.050" data-end="00:24:40.500" data-start-seconds="1479">And we're adding the handler.</span></p>
      <p><span data-start="00:24:40.500" data-end="00:24:43.200" data-start-seconds="1480">And then when that request is</span> <span data-start="00:24:40.500" data-end="00:24:43.200" data-start-seconds="1480">finished, we're removing it.</span></p>
      <p><span data-start="00:24:43.200" data-end="00:24:47.010" data-start-seconds="1483">So that basically means that the</span> <span data-start="00:24:43.200" data-end="00:24:47.010" data-start-seconds="1483">default state of onbeforeunload</span> <span data-start="00:24:47.010" data-end="00:24:50.782" data-start-seconds="1487">is null, which is what we</span> <span data-start="00:24:47.010" data-end="00:24:50.782" data-start-seconds="1487">want for caching reasons.</span></p>
      <p><span data-start="00:24:50.782" data-end="00:24:52.240" data-start-seconds="1490">Essentially, do</span> <span data-start="00:24:50.782" data-end="00:24:52.240" data-start-seconds="1490">less on the client.</span></p>
      <p><span data-start="00:24:52.240" data-end="00:24:54.340" data-start-seconds="1492">Do less before</span> <span data-start="00:24:52.240" data-end="00:24:54.340" data-start-seconds="1492">domready is fired.</span></p>
      <p><span data-start="00:24:54.340" data-end="00:24:56.825" data-start-seconds="1494">Don't resize images in CSS.</span></p>
      <p><span data-start="00:24:56.825" data-end="00:24:59.850" data-start-seconds="1496">Avoid complex CSS</span> <span data-start="00:24:56.825" data-end="00:24:59.850" data-start-seconds="1496">selectors, inline styles.</span></p>
      <p><span data-start="00:24:59.850" data-end="00:25:01.690" data-start-seconds="1499">Batch up DOM communication.</span></p>
      <p><span data-start="00:25:01.690" data-end="00:25:02.780" data-start-seconds="1501">Take elements under flow.</span></p>
      <p><span data-start="00:25:02.780" data-end="00:25:05.220" data-start-seconds="1502">So position them absolute,</span> <span data-start="00:25:02.780" data-end="00:25:05.220" data-start-seconds="1502">instead of having them</span> <span data-start="00:25:05.220" data-end="00:25:06.430" data-start-seconds="1505">in their reflow flow.</span></p>
      <p><span data-start="00:25:09.430" data-end="00:25:12.770" data-start-seconds="1509">Solving a performance problem</span> <span data-start="00:25:09.430" data-end="00:25:12.770" data-start-seconds="1509">is kind of like solving a crime.</span></p>
      <p><span data-start="00:25:12.770" data-end="00:25:14.880" data-start-seconds="1512">So first, you have</span> <span data-start="00:25:12.770" data-end="00:25:14.880" data-start-seconds="1512">to collect evidence.</span></p>
      <p><span data-start="00:25:14.880" data-end="00:25:17.240" data-start-seconds="1514">And then you have to</span> <span data-start="00:25:14.880" data-end="00:25:17.240" data-start-seconds="1514">interrogate suspects.</span></p>
      <p><span data-start="00:25:17.240" data-end="00:25:19.140" data-start-seconds="1517">And lastly, you</span> <span data-start="00:25:17.240" data-end="00:25:19.140" data-start-seconds="1517">need to correct--</span> <span data-start="00:25:19.140" data-end="00:25:21.190" data-start-seconds="1519">collect some forensics.</span></p>
      <p><span data-start="00:25:21.190" data-end="00:25:24.690" data-start-seconds="1521">And so let's solve</span> <span data-start="00:25:21.190" data-end="00:25:24.690" data-start-seconds="1521">a promise-- problem.</span></p>
      <p><span data-start="00:25:24.690" data-end="00:25:26.300" data-start-seconds="1524">Let's look for some evidence.</span></p>
      <p><span data-start="00:25:26.300" data-end="00:25:28.380" data-start-seconds="1526">And our crime scene is this app.</span></p>
      <p><span data-start="00:25:28.380" data-end="00:25:31.490" data-start-seconds="1528">This is a app I've been building</span> <span data-start="00:25:28.380" data-end="00:25:31.490" data-start-seconds="1528">to help source engineers.</span></p>
      <p><span data-start="00:25:31.490" data-end="00:25:35.210" data-start-seconds="1531">And notice, we have an infinite</span> <span data-start="00:25:31.490" data-end="00:25:35.210" data-start-seconds="1531">table down the right-hand side.</span></p>
      <p><span data-start="00:25:35.210" data-end="00:25:37.630" data-start-seconds="1535">Now, this thing will</span> <span data-start="00:25:35.210" data-end="00:25:37.630" data-start-seconds="1535">just carry on loading.</span></p>
      <p><span data-start="00:25:37.630" data-end="00:25:41.240" data-start-seconds="1537">There's about 1 million</span> <span data-start="00:25:37.630" data-end="00:25:41.240" data-start-seconds="1537">engineers in the database.</span></p>
      <p><span data-start="00:25:41.240" data-end="00:25:44.740" data-start-seconds="1541">So clearly, you can't</span> <span data-start="00:25:41.240" data-end="00:25:44.740" data-start-seconds="1541">display them all client side.</span></p>
      <p><span data-start="00:25:44.740" data-end="00:25:48.330" data-start-seconds="1544">So they're basically loaded in</span> <span data-start="00:25:44.740" data-end="00:25:48.330" data-start-seconds="1544">as needed when you scroll down</span> <span data-start="00:25:48.330" data-end="00:25:51.560" data-start-seconds="1548">this table.</span></p>
      <p><span data-start="00:25:51.560" data-end="00:25:55.190" data-start-seconds="1551">Now, let's open Chrome's</span> <span data-start="00:25:51.560" data-end="00:25:55.190" data-start-seconds="1551">timeline and have a look,</span> <span data-start="00:25:55.190" data-end="00:25:58.160" data-start-seconds="1555">see if we've got any</span> <span data-start="00:25:55.190" data-end="00:25:58.160" data-start-seconds="1555">performance problems.</span></p>
      <p><span data-start="00:25:58.160" data-end="00:26:01.730" data-start-seconds="1558">So we're going to use timeline</span> <span data-start="00:25:58.160" data-end="00:26:01.730" data-start-seconds="1558">feature and the Inspector.</span></p>
      <p><span data-start="00:26:01.730" data-end="00:26:06.230" data-start-seconds="1561">You can see we're going to</span> <span data-start="00:26:01.730" data-end="00:26:06.230" data-start-seconds="1561">select the frame option,</span> <span data-start="00:26:06.230" data-end="00:26:09.570" data-start-seconds="1566">and then we going to hit</span> <span data-start="00:26:06.230" data-end="00:26:09.570" data-start-seconds="1566">Record right at the bottom.</span></p>
      <p><span data-start="00:26:09.570" data-end="00:26:11.830" data-start-seconds="1569">And then we're going to</span> <span data-start="00:26:09.570" data-end="00:26:11.830" data-start-seconds="1569">play around with the app.</span></p>
      <p><span data-start="00:26:11.830" data-end="00:26:15.120" data-start-seconds="1571">And then we're</span> <span data-start="00:26:11.830" data-end="00:26:15.120" data-start-seconds="1571">going to hit Stop.</span></p>
      <p><span data-start="00:26:15.120" data-end="00:26:17.740" data-start-seconds="1575">And then we can see</span> <span data-start="00:26:15.120" data-end="00:26:17.740" data-start-seconds="1575">what the result of it.</span></p>
      <p><span data-start="00:26:17.740" data-end="00:26:21.980" data-start-seconds="1577">And Chrome will render this</span> <span data-start="00:26:17.740" data-end="00:26:21.980" data-start-seconds="1577">pretty nice table here.</span></p>
      <p><span data-start="00:26:21.980" data-end="00:26:24.140" data-start-seconds="1581">So you can see</span> <span data-start="00:26:21.980" data-end="00:26:24.140" data-start-seconds="1581">exactly the frame rate</span> <span data-start="00:26:24.140" data-end="00:26:25.960" data-start-seconds="1584">of your app and</span> <span data-start="00:26:24.140" data-end="00:26:25.960" data-start-seconds="1584">all the things it's</span> <span data-start="00:26:25.960" data-end="00:26:28.550" data-start-seconds="1585">doing, all the, basically,</span> <span data-start="00:26:25.960" data-end="00:26:28.550" data-start-seconds="1585">performance problems you have.</span></p>
      <p><span data-start="00:26:28.550" data-end="00:26:31.008" data-start-seconds="1588">And you can see already that</span> <span data-start="00:26:28.550" data-end="00:26:31.008" data-start-seconds="1588">we've got some big performance</span> <span data-start="00:26:31.008" data-end="00:26:32.560" data-start-seconds="1591">problems here.</span></p>
      <p><span data-start="00:26:32.560" data-end="00:26:38.337" data-start-seconds="1592">Almost no frames here are</span> <span data-start="00:26:32.560" data-end="00:26:38.337" data-start-seconds="1592">being rented under 60 Hertz,</span> <span data-start="00:26:38.337" data-end="00:26:39.170" data-start-seconds="1598">which kind of sucks.</span></p>
      <p><span data-start="00:26:39.170" data-end="00:26:41.930" data-start-seconds="1599">And you can see a lot</span> <span data-start="00:26:39.170" data-end="00:26:41.930" data-start-seconds="1599">of purple up there.</span></p>
      <p><span data-start="00:26:41.930" data-end="00:26:42.834" data-start-seconds="1601">Purple is bad.</span></p>
      <p><span data-start="00:26:42.834" data-end="00:26:44.000" data-start-seconds="1602">We don't want to see purple.</span></p>
      <p><span data-start="00:26:44.000" data-end="00:26:46.810" data-start-seconds="1604">That's rendering time.</span></p>
      <p><span data-start="00:26:46.810" data-end="00:26:49.080" data-start-seconds="1606">And you can see we've</span> <span data-start="00:26:46.810" data-end="00:26:49.080" data-start-seconds="1606">got a specific problem</span> <span data-start="00:26:49.080" data-end="00:26:54.750" data-start-seconds="1609">up here with, basically,</span> <span data-start="00:26:49.080" data-end="00:26:54.750" data-start-seconds="1609">when we're scrolling down</span> <span data-start="00:26:54.750" data-end="00:26:56.900" data-start-seconds="1614">and new records are</span> <span data-start="00:26:54.750" data-end="00:26:56.900" data-start-seconds="1614">being loaded in.</span></p>
      <p><span data-start="00:26:56.900" data-end="00:26:58.960" data-start-seconds="1616">So this is a really big problem.</span></p>
      <p><span data-start="00:26:58.960" data-end="00:27:01.650" data-start-seconds="1618">We probably want to</span> <span data-start="00:26:58.960" data-end="00:27:01.650" data-start-seconds="1618">try and solve that.</span></p>
      <p><span data-start="00:27:01.650" data-end="00:27:08.330" data-start-seconds="1621">So what we can do is hover</span> <span data-start="00:27:01.650" data-end="00:27:08.330" data-start-seconds="1621">over that specific render,</span> <span data-start="00:27:08.330" data-end="00:27:10.320" data-start-seconds="1628">see what caused it.</span></p>
      <p><span data-start="00:27:10.320" data-end="00:27:12.750" data-start-seconds="1630">And you can see</span> <span data-start="00:27:10.320" data-end="00:27:12.750" data-start-seconds="1630">here, it was actually</span> <span data-start="00:27:12.750" data-end="00:27:17.190" data-start-seconds="1632">caused by adding</span> <span data-start="00:27:12.750" data-end="00:27:17.190" data-start-seconds="1632">jQuery class, and then</span> <span data-start="00:27:17.190" data-end="00:27:20.860" data-start-seconds="1637">which was added by this</span> <span data-start="00:27:17.190" data-end="00:27:20.860" data-start-seconds="1637">show loading function.</span></p>
      <p><span data-start="00:27:20.860" data-end="00:27:23.680" data-start-seconds="1640">And that actually triggered</span> <span data-start="00:27:20.860" data-end="00:27:23.680" data-start-seconds="1640">a whole document reflow,</span> <span data-start="00:27:23.680" data-end="00:27:26.350" data-start-seconds="1643">which is really expensive.</span></p>
      <p><span data-start="00:27:26.350" data-end="00:27:28.550" data-start-seconds="1646">Now, it turns out</span> <span data-start="00:27:26.350" data-end="00:27:28.550" data-start-seconds="1646">that actually I</span> <span data-start="00:27:28.550" data-end="00:27:31.940" data-start-seconds="1648">had been kind of lazy when it</span> <span data-start="00:27:28.550" data-end="00:27:31.940" data-start-seconds="1648">comes to loading indicators.</span></p>
      <p><span data-start="00:27:31.940" data-end="00:27:35.030" data-start-seconds="1651">And I had just been adding a</span> <span data-start="00:27:31.940" data-end="00:27:35.030" data-start-seconds="1651">class of loading onto the table</span> <span data-start="00:27:35.030" data-end="00:27:37.840" data-start-seconds="1655">and removing that class</span> <span data-start="00:27:35.030" data-end="00:27:37.840" data-start-seconds="1655">when loading was finished.</span></p>
      <p><span data-start="00:27:37.840" data-end="00:27:40.786" data-start-seconds="1657">And you can kind of see it here.</span></p>
      <p><span data-start="00:27:40.786" data-end="00:27:43.260" data-start-seconds="1660">It's a little faint</span> <span data-start="00:27:40.786" data-end="00:27:43.260" data-start-seconds="1660">loading indicator.</span></p>
      <p><span data-start="00:27:43.260" data-end="00:27:45.910" data-start-seconds="1663">But basically, it turns</span> <span data-start="00:27:43.260" data-end="00:27:45.910" data-start-seconds="1663">out that it's a bad idea</span> <span data-start="00:27:45.910" data-end="00:27:47.950" data-start-seconds="1665">to add classes for</span> <span data-start="00:27:45.910" data-end="00:27:47.950" data-start-seconds="1665">loading indicators.</span></p>
      <p><span data-start="00:27:47.950" data-end="00:27:51.130" data-start-seconds="1667">Because it's causing a</span> <span data-start="00:27:47.950" data-end="00:27:51.130" data-start-seconds="1667">whole document reflow.</span></p>
      <p><span data-start="00:27:51.130" data-end="00:27:55.460" data-start-seconds="1671">So we could probably be a</span> <span data-start="00:27:51.130" data-end="00:27:55.460" data-start-seconds="1671">bit more clever about that.</span></p>
      <p><span data-start="00:27:55.460" data-end="00:27:58.410" data-start-seconds="1675">Now, when you're detecting</span> <span data-start="00:27:55.460" data-end="00:27:58.410" data-start-seconds="1675">a memory leak in Chrome,</span> <span data-start="00:27:58.410" data-end="00:28:01.830" data-start-seconds="1678">the first place to really</span> <span data-start="00:27:58.410" data-end="00:28:01.830" data-start-seconds="1678">go is the Memory tab</span> <span data-start="00:28:01.830" data-end="00:28:03.180" data-start-seconds="1681">in the Inspector.</span></p>
      <p><span data-start="00:28:03.180" data-end="00:28:05.800" data-start-seconds="1683">And the profile of</span> <span data-start="00:28:03.180" data-end="00:28:05.800" data-start-seconds="1683">a normal application</span> <span data-start="00:28:05.800" data-end="00:28:08.180" data-start-seconds="1685">should look more like</span> <span data-start="00:28:05.800" data-end="00:28:08.180" data-start-seconds="1685">a sawtooth, right?</span> <span data-start="00:28:08.180" data-end="00:28:09.840" data-start-seconds="1688">So memory is allocated.</span></p>
      <p><span data-start="00:28:09.840" data-end="00:28:13.110" data-start-seconds="1689">And then the garbage collector</span> <span data-start="00:28:09.840" data-end="00:28:13.110" data-start-seconds="1689">kicks in and deallocates them.</span></p>
      <p><span data-start="00:28:13.110" data-end="00:28:17.270" data-start-seconds="1693">So you can see that little</span> <span data-start="00:28:13.110" data-end="00:28:17.270" data-start-seconds="1693">there is where the garbage</span> <span data-start="00:28:17.270" data-end="00:28:19.950" data-start-seconds="1697">collector actually kicks in.</span></p>
      <p><span data-start="00:28:19.950" data-end="00:28:22.170" data-start-seconds="1699">Now, that would be a</span> <span data-start="00:28:19.950" data-end="00:28:22.170" data-start-seconds="1699">normal application.</span></p>
      <p><span data-start="00:28:22.170" data-end="00:28:24.906" data-start-seconds="1702">This is my application.</span></p>
      <p><span data-start="00:28:24.906" data-end="00:28:27.820" data-start-seconds="1704">All right, so you can see</span> <span data-start="00:28:24.906" data-end="00:28:27.820" data-start-seconds="1704">we got a problem here.</span></p>
      <p><span data-start="00:28:27.820" data-end="00:28:33.490" data-start-seconds="1707">This-- the memory is just going</span> <span data-start="00:28:27.820" data-end="00:28:33.490" data-start-seconds="1707">up and up and up and up and up.</span></p>
      <p><span data-start="00:28:33.490" data-end="00:28:36.280" data-start-seconds="1713">Now, you can see the garbage</span> <span data-start="00:28:33.490" data-end="00:28:36.280" data-start-seconds="1713">collectors kicking in.</span></p>
      <p><span data-start="00:28:36.280" data-end="00:28:39.320" data-start-seconds="1716">But actually, it's not</span> <span data-start="00:28:36.280" data-end="00:28:39.320" data-start-seconds="1716">having much sort of effect.</span></p>
      <p><span data-start="00:28:39.320" data-end="00:28:40.710" data-start-seconds="1719">Memory is still going up.</span></p>
      <p><span data-start="00:28:40.710" data-end="00:28:43.930" data-start-seconds="1720">And there's kind of</span> <span data-start="00:28:40.710" data-end="00:28:43.930" data-start-seconds="1720">a clue here to why.</span></p>
      <p><span data-start="00:28:43.930" data-end="00:28:48.180" data-start-seconds="1723">You can see this line</span> <span data-start="00:28:43.930" data-end="00:28:48.180" data-start-seconds="1723">here is all the DOM nodes.</span></p>
      <p><span data-start="00:28:48.180" data-end="00:28:50.650" data-start-seconds="1728">And that's just-- that</span> <span data-start="00:28:48.180" data-end="00:28:50.650" data-start-seconds="1728">is just going up and up.</span></p>
      <p><span data-start="00:28:50.650" data-end="00:28:53.170" data-start-seconds="1730">We're just adding more and</span> <span data-start="00:28:50.650" data-end="00:28:53.170" data-start-seconds="1730">more DOM nodes to the page.</span></p>
      <p><span data-start="00:28:53.170" data-end="00:28:57.014" data-start-seconds="1733">Now, this memory graph doesn't</span> <span data-start="00:28:53.170" data-end="00:28:57.014" data-start-seconds="1733">actually include DOM nodes.</span></p>
      <p><span data-start="00:28:57.014" data-end="00:28:58.180" data-start-seconds="1737">DOM nodes are native memory.</span></p>
      <p><span data-start="00:28:58.180" data-end="00:29:01.260" data-start-seconds="1738">But they-- they're</span> <span data-start="00:28:58.180" data-end="00:29:01.260" data-start-seconds="1738">kind of linked.</span></p>
      <p><span data-start="00:29:01.260" data-end="00:29:03.860" data-start-seconds="1741">So there are objects</span> <span data-start="00:29:01.260" data-end="00:29:03.860" data-start-seconds="1741">that reference</span> <span data-start="00:29:03.860" data-end="00:29:05.780" data-start-seconds="1743">that DOM node-- those DOM nodes.</span></p>
      <p><span data-start="00:29:05.780" data-end="00:29:08.430" data-start-seconds="1745">And so you can see, we're</span> <span data-start="00:29:05.780" data-end="00:29:08.430" data-start-seconds="1745">kind of-- the main problem</span> <span data-start="00:29:08.430" data-end="00:29:12.020" data-start-seconds="1748">here is that we're just adding</span> <span data-start="00:29:08.430" data-end="00:29:12.020" data-start-seconds="1748">too many DOM nodes to the page.</span></p>
      <p><span data-start="00:29:12.020" data-end="00:29:14.450" data-start-seconds="1752">So it looks like we need to</span> <span data-start="00:29:12.020" data-end="00:29:14.450" data-start-seconds="1752">do a bit of manual garbage</span> <span data-start="00:29:14.450" data-end="00:29:14.970" data-start-seconds="1754">collection.</span></p>
      <p><span data-start="00:29:14.970" data-end="00:29:18.200" data-start-seconds="1754">So when the user is</span> <span data-start="00:29:14.970" data-end="00:29:18.200" data-start-seconds="1754">scrolling that big table,</span> <span data-start="00:29:18.200" data-end="00:29:20.730" data-start-seconds="1758">we need to actually delete</span> <span data-start="00:29:18.200" data-end="00:29:20.730" data-start-seconds="1758">some of these DOM nodes</span> <span data-start="00:29:20.730" data-end="00:29:24.310" data-start-seconds="1760">that are outside the viewport</span> <span data-start="00:29:20.730" data-end="00:29:24.310" data-start-seconds="1760">and try and get our memory</span> <span data-start="00:29:24.310" data-end="00:29:26.856" data-start-seconds="1764">management under control.</span></p>
      <p><span data-start="00:29:26.856" data-end="00:29:32.790" data-start-seconds="1766">The next tool in our arsenal</span> <span data-start="00:29:26.856" data-end="00:29:32.790" data-start-seconds="1766">is Chrome's Profiler.</span></p>
      <p><span data-start="00:29:32.790" data-end="00:29:37.860" data-start-seconds="1772">And you can basically collect</span> <span data-start="00:29:32.790" data-end="00:29:37.860" data-start-seconds="1772">some JavaScript CPU pro-- CPU</span> <span data-start="00:29:37.860" data-end="00:29:38.860" data-start-seconds="1777">profiles.</span></p>
      <p><span data-start="00:29:38.860" data-end="00:29:42.170" data-start-seconds="1778">Same kind of technique as</span> <span data-start="00:29:38.860" data-end="00:29:42.170" data-start-seconds="1778">before, you click Start,</span> <span data-start="00:29:42.170" data-end="00:29:45.100" data-start-seconds="1782">you play around with your</span> <span data-start="00:29:42.170" data-end="00:29:45.100" data-start-seconds="1782">app, just-- perhaps, just</span> <span data-start="00:29:45.100" data-end="00:29:48.130" data-start-seconds="1785">perform a specific action,</span> <span data-start="00:29:45.100" data-end="00:29:48.130" data-start-seconds="1785">and then click Stop.</span></p>
      <p><span data-start="00:29:48.130" data-end="00:29:51.520" data-start-seconds="1788">And then you can</span> <span data-start="00:29:48.130" data-end="00:29:51.520" data-start-seconds="1788">look at all the data.</span></p>
      <p><span data-start="00:29:51.520" data-end="00:29:53.800" data-start-seconds="1791">And it will show</span> <span data-start="00:29:51.520" data-end="00:29:53.800" data-start-seconds="1791">you which operations</span> <span data-start="00:29:53.800" data-end="00:29:55.810" data-start-seconds="1793">are taking the longest.</span></p>
      <p><span data-start="00:29:55.810" data-end="00:29:59.590" data-start-seconds="1795">And the sort order is bottom up,</span> <span data-start="00:29:55.810" data-end="00:29:59.590" data-start-seconds="1795">so basically listing functions</span> <span data-start="00:29:59.590" data-end="00:30:02.390" data-start-seconds="1799">by impact on performance.</span></p>
      <p><span data-start="00:30:02.390" data-end="00:30:04.780" data-start-seconds="1802">And you can also see</span> <span data-start="00:30:02.390" data-end="00:30:04.780" data-start-seconds="1802">timings by percentage,</span> <span data-start="00:30:04.780" data-end="00:30:07.730" data-start-seconds="1804">which is useful for</span> <span data-start="00:30:04.780" data-end="00:30:07.730" data-start-seconds="1804">exposing bottlenecks.</span></p>
      <p><span data-start="00:30:07.730" data-end="00:30:10.680" data-start-seconds="1807">And here you can see there's</span> <span data-start="00:30:07.730" data-end="00:30:10.680" data-start-seconds="1807">a little exclamation mark.</span></p>
      <p><span data-start="00:30:10.680" data-end="00:30:14.440" data-start-seconds="1810">And this means the code</span> <span data-start="00:30:10.680" data-end="00:30:14.440" data-start-seconds="1810">has been unoptimized.</span></p>
      <p><span data-start="00:30:14.440" data-end="00:30:17.010" data-start-seconds="1814">So the VA compiler</span> <span data-start="00:30:14.440" data-end="00:30:17.010" data-start-seconds="1814">has two modes.</span></p>
      <p><span data-start="00:30:17.010" data-end="00:30:19.440" data-start-seconds="1817">It has optimized</span> <span data-start="00:30:17.010" data-end="00:30:19.440" data-start-seconds="1817">mode and full mode.</span></p>
      <p><span data-start="00:30:19.440" data-end="00:30:22.420" data-start-seconds="1819">And it tries to render</span> <span data-start="00:30:19.440" data-end="00:30:22.420" data-start-seconds="1819">everything in optimized mode</span> <span data-start="00:30:22.420" data-end="00:30:24.010" data-start-seconds="1822">if it-- if it can.</span></p>
      <p><span data-start="00:30:24.010" data-end="00:30:26.526" data-start-seconds="1824">Sometimes it falls</span> <span data-start="00:30:24.010" data-end="00:30:26.526" data-start-seconds="1824">back to full mode.</span></p>
      <p><span data-start="00:30:26.526" data-end="00:30:28.900" data-start-seconds="1826">And this can happen for</span> <span data-start="00:30:26.526" data-end="00:30:28.900" data-start-seconds="1826">a variety of reasons.</span></p>
      <p><span data-start="00:30:28.900" data-end="00:30:32.080" data-start-seconds="1828">But in this case, its</span> <span data-start="00:30:28.900" data-end="00:30:32.080" data-start-seconds="1828">because jQuery extend</span> <span data-start="00:30:32.080" data-end="00:30:34.640" data-start-seconds="1832">has a try-catch in it.</span></p>
      <p><span data-start="00:30:34.640" data-end="00:30:38.630" data-start-seconds="1834">And if it sees a try-catch, then</span> <span data-start="00:30:34.640" data-end="00:30:38.630" data-start-seconds="1834">it just falls back to full mode</span> <span data-start="00:30:38.630" data-end="00:30:40.320" data-start-seconds="1838">immediately.</span></p>
      <p><span data-start="00:30:40.320" data-end="00:30:42.950" data-start-seconds="1840">Now, if you hover over that</span> <span data-start="00:30:40.320" data-end="00:30:42.950" data-start-seconds="1840">little exclamation mark,</span> <span data-start="00:30:42.950" data-end="00:30:46.570" data-start-seconds="1842">it'll tell you what's wrong,</span> <span data-start="00:30:42.950" data-end="00:30:46.570" data-start-seconds="1842">what caused the V8 compiler</span> <span data-start="00:30:46.570" data-end="00:30:50.290" data-start-seconds="1846">to drop out of optimize mode.</span></p>
      <p><span data-start="00:30:50.290" data-end="00:30:53.960" data-start-seconds="1850">You can also drill down into</span> <span data-start="00:30:50.290" data-end="00:30:53.960" data-start-seconds="1850">events, see what coursed them.</span></p>
      <p><span data-start="00:30:53.960" data-end="00:30:57.820" data-start-seconds="1853">In this case, the--</span> <span data-start="00:30:53.960" data-end="00:30:57.820" data-start-seconds="1853">the bit of JavaScript</span> <span data-start="00:30:57.820" data-end="00:31:04.180" data-start-seconds="1857">that's taking the longest</span> <span data-start="00:30:57.820" data-end="00:31:04.180" data-start-seconds="1857">is this WebKit, scroll view</span> <span data-start="00:31:04.180" data-end="00:31:08.930" data-start-seconds="1864">into-- scroll view</span> <span data-start="00:31:04.180" data-end="00:31:08.930" data-start-seconds="1864">if needed function.</span></p>
      <p><span data-start="00:31:08.930" data-end="00:31:13.230" data-start-seconds="1868">Now, it's kind of, uh-- there's</span> <span data-start="00:31:08.930" data-end="00:31:13.230" data-start-seconds="1868">not much we can do about this.</span></p>
      <p><span data-start="00:31:13.230" data-end="00:31:16.230" data-start-seconds="1873">Basically, it's kind of</span> <span data-start="00:31:13.230" data-end="00:31:16.230" data-start-seconds="1873">expected that any communication</span> <span data-start="00:31:16.230" data-end="00:31:21.090" data-start-seconds="1876">with the DOM is going</span> <span data-start="00:31:16.230" data-end="00:31:21.090" data-start-seconds="1876">to take a long time.</span></p>
      <p><span data-start="00:31:21.090" data-end="00:31:23.280" data-start-seconds="1881">Heap snapshots, your next tool.</span></p>
      <p><span data-start="00:31:23.280" data-end="00:31:25.590" data-start-seconds="1883">You can take one snap</span> <span data-start="00:31:23.280" data-end="00:31:25.590" data-start-seconds="1883">shot, and then you</span> <span data-start="00:31:25.590" data-end="00:31:29.890" data-start-seconds="1885">can manipulate your app, and</span> <span data-start="00:31:25.590" data-end="00:31:29.890" data-start-seconds="1885">then take another snapshot.</span></p>
      <p><span data-start="00:31:29.890" data-end="00:31:32.010" data-start-seconds="1889">And you can see we</span> <span data-start="00:31:29.890" data-end="00:31:32.010" data-start-seconds="1889">have two snapshots down</span> <span data-start="00:31:32.010" data-end="00:31:34.290" data-start-seconds="1892">at the left-hand side here.</span></p>
      <p><span data-start="00:31:34.290" data-end="00:31:38.184" data-start-seconds="1894">And then what we're doing</span> <span data-start="00:31:34.290" data-end="00:31:38.184" data-start-seconds="1894">is we're comparing them.</span></p>
      <p><span data-start="00:31:38.184" data-end="00:31:41.270" data-start-seconds="1898">So you can see, it's a</span> <span data-start="00:31:38.184" data-end="00:31:41.270" data-start-seconds="1898">little option down here.</span></p>
      <p><span data-start="00:31:41.270" data-end="00:31:42.390" data-start-seconds="1901">We can select comparison.</span></p>
      <p><span data-start="00:31:42.390" data-end="00:31:46.120" data-start-seconds="1902">And we can select which snapshot</span> <span data-start="00:31:42.390" data-end="00:31:46.120" data-start-seconds="1902">we want to compare it to.</span></p>
      <p><span data-start="00:31:46.120" data-end="00:31:48.700" data-start-seconds="1906">And then it's going to show</span> <span data-start="00:31:46.120" data-end="00:31:48.700" data-start-seconds="1906">you this interesting delta.</span></p>
      <p><span data-start="00:31:48.700" data-end="00:31:51.755" data-start-seconds="1908">It'll show you the object</span> <span data-start="00:31:48.700" data-end="00:31:51.755" data-start-seconds="1908">allocated, objects deallocated,</span> <span data-start="00:31:51.755" data-end="00:31:52.380" data-start-seconds="1911">and this delta.</span></p>
      <p><span data-start="00:31:52.380" data-end="00:31:56.500" data-start-seconds="1912">This delta is kind of useful if</span> <span data-start="00:31:52.380" data-end="00:31:56.500" data-start-seconds="1912">we want to figure out-- maybe</span> <span data-start="00:31:56.500" data-end="00:31:57.980" data-start-seconds="1916">this is causing a memory leak.</span></p>
      <p><span data-start="00:31:57.980" data-end="00:32:01.680" data-start-seconds="1917">If we have a positive</span> <span data-start="00:31:57.980" data-end="00:32:01.680" data-start-seconds="1917">delta the whole time,</span> <span data-start="00:32:01.680" data-end="00:32:03.830" data-start-seconds="1921">then that means that</span> <span data-start="00:32:01.680" data-end="00:32:03.830" data-start-seconds="1921">objects are being allocated.</span></p>
      <p><span data-start="00:32:03.830" data-end="00:32:07.280" data-start-seconds="1923">And they're not being</span> <span data-start="00:32:03.830" data-end="00:32:07.280" data-start-seconds="1923">deallocated properly.</span></p>
      <p><span data-start="00:32:07.280" data-end="00:32:09.447" data-start-seconds="1927">So to help performance</span> <span data-start="00:32:07.280" data-end="00:32:09.447" data-start-seconds="1927">primes-- performance crimes--</span> <span data-start="00:32:09.447" data-end="00:32:10.654" data-start-seconds="1929">you have to lay down the law.</span></p>
      <p><span data-start="00:32:10.654" data-end="00:32:12.690" data-start-seconds="1930">You have to continually</span> <span data-start="00:32:10.654" data-end="00:32:12.690" data-start-seconds="1930">record performance.</span></p>
      <p><span data-start="00:32:12.690" data-end="00:32:17.740" data-start-seconds="1932">And you have to notify yourself</span> <span data-start="00:32:12.690" data-end="00:32:17.740" data-start-seconds="1932">when something bad happens.</span></p>
      <p><span data-start="00:32:17.740" data-end="00:32:20.270" data-start-seconds="1937">And Google has this</span> <span data-start="00:32:17.740" data-end="00:32:20.270" data-start-seconds="1937">incredible service</span> <span data-start="00:32:20.270" data-end="00:32:21.830" data-start-seconds="1940">called PageSpeed Insights.</span></p>
      <p><span data-start="00:32:21.830" data-end="00:32:23.580" data-start-seconds="1941">It'll tell you a lot</span> <span data-start="00:32:21.830" data-end="00:32:23.580" data-start-seconds="1941">about the performance</span> <span data-start="00:32:23.580" data-end="00:32:27.150" data-start-seconds="1943">of your app, especially the</span> <span data-start="00:32:23.580" data-end="00:32:27.150" data-start-seconds="1943">networking aspect of it.</span></p>
      <p><span data-start="00:32:27.150" data-end="00:32:29.190" data-start-seconds="1947">So you can find it</span> <span data-start="00:32:27.150" data-end="00:32:29.190" data-start-seconds="1947">online here or you</span> <span data-start="00:32:29.190" data-end="00:32:32.550" data-start-seconds="1949">just Google PageSpeed Insights.</span></p>
      <p><span data-start="00:32:32.550" data-end="00:32:34.330" data-start-seconds="1952">And it looks a bit like this.</span></p>
      <p><span data-start="00:32:34.330" data-end="00:32:36.880" data-start-seconds="1954">You just enter your URL in here.</span></p>
      <p><span data-start="00:32:36.880" data-end="00:32:38.990" data-start-seconds="1956">And it'll go off.</span></p>
      <p><span data-start="00:32:38.990" data-end="00:32:41.390" data-start-seconds="1958">And it's got about</span> <span data-start="00:32:38.990" data-end="00:32:41.390" data-start-seconds="1958">100 different rules.</span></p>
      <p><span data-start="00:32:41.390" data-end="00:32:44.160" data-start-seconds="1961">And it will go off and,</span> <span data-start="00:32:41.390" data-end="00:32:44.160" data-start-seconds="1961">um, apply your site,</span> <span data-start="00:32:44.160" data-end="00:32:47.140" data-start-seconds="1964">see if your site passes</span> <span data-start="00:32:44.160" data-end="00:32:47.140" data-start-seconds="1964">any of these rules.</span></p>
      <p><span data-start="00:32:47.140" data-end="00:32:49.930" data-start-seconds="1967">And it'll give you some</span> <span data-start="00:32:47.140" data-end="00:32:49.930" data-start-seconds="1967">tips on optimizations</span> <span data-start="00:32:49.930" data-end="00:32:51.460" data-start-seconds="1969">you should be making.</span></p>
      <p><span data-start="00:32:51.460" data-end="00:32:55.320" data-start-seconds="1971">What's kind of interesting is</span> <span data-start="00:32:51.460" data-end="00:32:55.320" data-start-seconds="1971">that they actually have an API.</span></p>
      <p><span data-start="00:32:55.320" data-end="00:32:57.490" data-start-seconds="1975">It's PageSpeeds Insights API.</span></p>
      <p><span data-start="00:32:57.490" data-end="00:33:02.100" data-start-seconds="1977">And they give you, like, a</span> <span data-start="00:32:57.490" data-end="00:33:02.100" data-start-seconds="1977">ridiculous 2,500-- 25,000</span> <span data-start="00:33:02.100" data-end="00:33:04.470" data-start-seconds="1982">even-- requests a day.</span></p>
      <p><span data-start="00:33:04.470" data-end="00:33:09.350" data-start-seconds="1984">So basically, a free API</span> <span data-start="00:33:04.470" data-end="00:33:09.350" data-start-seconds="1984">to this PageSpeed Insights.</span></p>
      <p><span data-start="00:33:09.350" data-end="00:33:11.100" data-start-seconds="1989">Now, what we can do</span> <span data-start="00:33:09.350" data-end="00:33:11.100" data-start-seconds="1989">is we can use this API</span> <span data-start="00:33:11.100" data-end="00:33:12.860" data-start-seconds="1991">for continuous integration.</span></p>
      <p><span data-start="00:33:12.860" data-end="00:33:15.730" data-start-seconds="1992">This is a little bit of</span> <span data-start="00:33:12.860" data-end="00:33:15.730" data-start-seconds="1992">Ruby that I've written.</span></p>
      <p><span data-start="00:33:15.730" data-end="00:33:19.580" data-start-seconds="1995">But basically, this is--</span> <span data-start="00:33:15.730" data-end="00:33:19.580" data-start-seconds="1995">it's a client to that API.</span></p>
      <p><span data-start="00:33:19.580" data-end="00:33:21.520" data-start-seconds="1999">And whenever you</span> <span data-start="00:33:19.580" data-end="00:33:21.520" data-start-seconds="1999">run this script,</span> <span data-start="00:33:21.520" data-end="00:33:24.260" data-start-seconds="2001">it's going to hit that API.</span></p>
      <p><span data-start="00:33:24.260" data-end="00:33:26.790" data-start-seconds="2004">And the API is going to</span> <span data-start="00:33:24.260" data-end="00:33:26.790" data-start-seconds="2004">analyze your site, come back</span> <span data-start="00:33:26.790" data-end="00:33:30.430" data-start-seconds="2006">with a bunch of stats, some</span> <span data-start="00:33:26.790" data-end="00:33:30.430" data-start-seconds="2006">of which-- well, one of which</span> <span data-start="00:33:30.430" data-end="00:33:31.920" data-start-seconds="2010">includes the page score.</span></p>
      <p><span data-start="00:33:31.920" data-end="00:33:34.660" data-start-seconds="2011">And then we're writing</span> <span data-start="00:33:31.920" data-end="00:33:34.660" data-start-seconds="2011">that to a CSV file.</span></p>
      <p><span data-start="00:33:34.660" data-end="00:33:36.850" data-start-seconds="2014">And so what I've done is</span> <span data-start="00:33:34.660" data-end="00:33:36.850" data-start-seconds="2014">I've actually tied this</span> <span data-start="00:33:36.850" data-end="00:33:38.710" data-start-seconds="2016">in with a post apply hook.</span></p>
      <p><span data-start="00:33:38.710" data-end="00:33:41.810" data-start-seconds="2018">So it records data after</span> <span data-start="00:33:38.710" data-end="00:33:41.810" data-start-seconds="2018">every single deploy.</span></p>
      <p><span data-start="00:33:41.810" data-end="00:33:44.340" data-start-seconds="2021">And then I can get a</span> <span data-start="00:33:41.810" data-end="00:33:44.340" data-start-seconds="2021">really good head-- heads up</span> <span data-start="00:33:44.340" data-end="00:33:48.770" data-start-seconds="2024">and identify deploy as the</span> <span data-start="00:33:44.340" data-end="00:33:48.770" data-start-seconds="2024">really significantly impact</span> <span data-start="00:33:48.770" data-end="00:33:51.900" data-start-seconds="2028">performance pretty</span> <span data-start="00:33:48.770" data-end="00:33:51.900" data-start-seconds="2028">easily by just going</span> <span data-start="00:33:51.900" data-end="00:33:53.794" data-start-seconds="2031">through the CSV file.</span></p>
      <p><span data-start="00:33:53.794" data-end="00:33:55.210" data-start-seconds="2033">It'd be kind of</span> <span data-start="00:33:53.794" data-end="00:33:55.210" data-start-seconds="2033">awesome, actually,</span> <span data-start="00:33:55.210" data-end="00:33:57.315" data-start-seconds="2035">if this was a service,</span> <span data-start="00:33:55.210" data-end="00:33:57.315" data-start-seconds="2035">a monitoring service.</span></p>
      <p><span data-start="00:33:57.315" data-end="00:33:59.360" data-start-seconds="2037">Um, maybe if any</span> <span data-start="00:33:57.315" data-end="00:33:59.360" data-start-seconds="2037">of you guys want</span> <span data-start="00:33:59.360" data-end="00:34:03.060" data-start-seconds="2039">to start a startup out there,</span> <span data-start="00:33:59.360" data-end="00:34:03.060" data-start-seconds="2039">that might be a good idea.</span></p>
      <p><span data-start="00:34:03.060" data-end="00:34:06.720" data-start-seconds="2043">So in conclusion, have a</span> <span data-start="00:34:03.060" data-end="00:34:06.720" data-start-seconds="2043">budget and stick to it.</span></p>
      <p><span data-start="00:34:06.720" data-end="00:34:10.679" data-start-seconds="2046">300 to 500 milliseconds</span> <span data-start="00:34:06.720" data-end="00:34:10.679" data-start-seconds="2046">is a good place to start.</span></p>
      <p><span data-start="00:34:10.679" data-end="00:34:12.100" data-start-seconds="2050">Keep performance in mind.</span></p>
      <p><span data-start="00:34:12.100" data-end="00:34:15.400" data-start-seconds="2052">So it's easy to deal with the</span> <span data-start="00:34:12.100" data-end="00:34:15.400" data-start-seconds="2052">network stuff at the start.</span></p>
      <p><span data-start="00:34:15.400" data-end="00:34:18.969" data-start-seconds="2055">But remember not to forget</span> <span data-start="00:34:15.400" data-end="00:34:18.969" data-start-seconds="2055">to optimize rendering.</span></p>
      <p><span data-start="00:34:18.969" data-end="00:34:21.474" data-start-seconds="2058">Remember, speed matters.</span></p>
      <p><span data-start="00:34:21.474" data-end="00:34:23.958" data-start-seconds="2061">Thank you very much.</span></p>
      <p><span data-start="00:34:23.958" data-end="00:34:32.445" data-start-seconds="2063">[APPLAUSE]</span> <span data-start="00:34:32.445" data-end="00:34:33.942" data-start-seconds="2072">Come on.</span></p>
      <p><span data-start="00:34:33.942" data-end="00:34:34.831" data-start-seconds="2073">That was great.</span></p>
      <p><span data-start="00:34:34.831" data-end="00:34:35.540" data-start-seconds="2074">Thanks very much.</span></p>
      <p><span data-start="00:34:38.837" data-end="00:34:47.139" data-start-seconds="2078">Um, one question that, uh, I</span> <span data-start="00:34:38.837" data-end="00:34:47.139" data-start-seconds="2078">saw some people asking about,</span> <span data-start="00:34:47.139" data-end="00:34:51.139" data-start-seconds="2087">deferring loading data.</span></p>
      <p><span data-start="00:34:51.139" data-end="00:34:54.679" data-start-seconds="2091">Using that as a technique,</span> <span data-start="00:34:51.139" data-end="00:34:54.679" data-start-seconds="2091">does that conflict</span> <span data-start="00:34:54.679" data-end="00:34:57.990" data-start-seconds="2094">with search engine optimization?</span> <span data-start="00:34:57.990" data-end="00:35:00.400" data-start-seconds="2097">Basically, I think this has</span> <span data-start="00:34:57.990" data-end="00:35:00.400" data-start-seconds="2097">come up with Monocle before,</span> <span data-start="00:35:00.400" data-end="00:35:04.860" data-start-seconds="2100">which is like, if we don't have</span> <span data-start="00:35:00.400" data-end="00:35:04.860" data-start-seconds="2100">the data there in the markup,</span> <span data-start="00:35:04.860" data-end="00:35:08.400" data-start-seconds="2104">is that a challenge with</span> <span data-start="00:35:04.860" data-end="00:35:08.400" data-start-seconds="2104">getting a place in Google?</span> <span data-start="00:35:08.400" data-end="00:35:08.900" data-start-seconds="2108">Yeah.</span></p>
      <p><span data-start="00:35:08.900" data-end="00:35:12.400" data-start-seconds="2108">So this is definitely an issue</span> <span data-start="00:35:08.900" data-end="00:35:12.400" data-start-seconds="2108">that you need to be aware of.</span></p>
      <p><span data-start="00:35:12.400" data-end="00:35:14.255" data-start-seconds="2112">monacle.io, if you</span></p>
      <p><span data-start="00:35:12.400" data-end="00:35:14.255" data-start-seconds="2112">want to check it out,</span> <span data-start="00:35:14.255" data-end="00:35:17.003" data-start-seconds="2114">is actually all</span> <span data-start="00:35:14.255" data-end="00:35:17.003" data-start-seconds="2114">rendered client sites.</span></p>
      <p><span data-start="00:35:17.003" data-end="00:35:20.400" data-start-seconds="2117">There's no HTML</span> <span data-start="00:35:17.003" data-end="00:35:20.400" data-start-seconds="2117">shipped to the browser.</span></p>
      <p><span data-start="00:35:20.400" data-end="00:35:23.020" data-start-seconds="2120">But it turns out you can</span> <span data-start="00:35:20.400" data-end="00:35:23.020" data-start-seconds="2120">actually fix this really</span> <span data-start="00:35:23.020" data-end="00:35:24.549" data-start-seconds="2123">simply.</span></p>
      <p><span data-start="00:35:24.549" data-end="00:35:26.090" data-start-seconds="2124">You can fix this in</span> <span data-start="00:35:24.549" data-end="00:35:26.090" data-start-seconds="2124">about 10 minutes.</span></p>
      <p><span data-start="00:35:26.090" data-end="00:35:29.721" data-start-seconds="2126">Google have this</span> <span data-start="00:35:26.090" data-end="00:35:29.721" data-start-seconds="2126">AJAX crawling spec.</span></p>
      <p><span data-start="00:35:29.721" data-end="00:35:31.220" data-start-seconds="2129">And there's a little</span> <span data-start="00:35:29.721" data-end="00:35:31.220" data-start-seconds="2129">tag you can put</span> <span data-start="00:35:31.220" data-end="00:35:32.860" data-start-seconds="2131">in the page that</span> <span data-start="00:35:31.220" data-end="00:35:32.860" data-start-seconds="2131">tells the Google</span> <span data-start="00:35:32.860" data-end="00:35:35.410" data-start-seconds="2132">bot that you support the spec.</span></p>
      <p><span data-start="00:35:35.410" data-end="00:35:38.650" data-start-seconds="2135">And then the Google bot</span> <span data-start="00:35:35.410" data-end="00:35:38.650" data-start-seconds="2135">will request your website.</span></p>
      <p><span data-start="00:35:38.650" data-end="00:35:41.220" data-start-seconds="2138">And they will append a</span> <span data-start="00:35:38.650" data-end="00:35:41.220" data-start-seconds="2138">little query parameter</span> <span data-start="00:35:41.220" data-end="00:35:42.560" data-start-seconds="2141">onto your website.</span></p>
      <p><span data-start="00:35:42.560" data-end="00:35:44.920" data-start-seconds="2142">So you can detect that</span> <span data-start="00:35:42.560" data-end="00:35:44.920" data-start-seconds="2142">and basically serve up</span> <span data-start="00:35:44.920" data-end="00:35:48.540" data-start-seconds="2144">a bopped-- a bought optimized</span> <span data-start="00:35:44.920" data-end="00:35:48.540" data-start-seconds="2144">version of the page.</span></p>
      <p><span data-start="00:35:48.540" data-end="00:35:52.800" data-start-seconds="2148">And if you have a look at the</span> <span data-start="00:35:48.540" data-end="00:35:52.800" data-start-seconds="2148">Google rankings of monocle.io,</span></p>
      <p><span data-start="00:35:52.800" data-end="00:35:55.840" data-start-seconds="2152">you'll see that it's</span> <span data-start="00:35:52.800" data-end="00:35:55.840" data-start-seconds="2152">probably indexed.</span></p>
      <p><span data-start="00:35:55.840" data-end="00:36:00.635" data-start-seconds="2155">There's no problem with actually</span> <span data-start="00:35:55.840" data-end="00:36:00.635" data-start-seconds="2155">indexing JavaScript apps.</span></p>
      <p><span data-start="00:36:00.635" data-end="00:36:04.440" data-start-seconds="2160">Um, so you've done</span> <span data-start="00:36:00.635" data-end="00:36:04.440" data-start-seconds="2160">kind of a bit of work</span> <span data-start="00:36:04.440" data-end="00:36:09.000" data-start-seconds="2164">on performance for both</span> <span data-start="00:36:04.440" data-end="00:36:09.000" data-start-seconds="2164">Monocle and for sourcing.</span></p>
      <p><span data-start="00:36:09.000" data-end="00:36:11.380" data-start-seconds="2169">Where do you think</span> <span data-start="00:36:09.000" data-end="00:36:11.380" data-start-seconds="2169">that your got, like,</span> <span data-start="00:36:11.380" data-end="00:36:14.466" data-start-seconds="2171">the most impact of kind</span> <span data-start="00:36:11.380" data-end="00:36:14.466" data-start-seconds="2171">of-- of the improvements</span> <span data-start="00:36:14.466" data-end="00:36:16.274" data-start-seconds="2174">that you landed?</span> <span data-start="00:36:16.274" data-end="00:36:20.520" data-start-seconds="2176">Um, embarrassing it was</span> <span data-start="00:36:16.274" data-end="00:36:20.520" data-start-seconds="2176">probably gzip actually.</span></p>
      <p><span data-start="00:36:20.520" data-end="00:36:25.000" data-start-seconds="2180">You know, gzip's not turned on</span> <span data-start="00:36:20.520" data-end="00:36:25.000" data-start-seconds="2180">by default on a lot of servers.</span></p>
      <p><span data-start="00:36:25.000" data-end="00:36:27.460" data-start-seconds="2185">And I was using Heroku.</span></p>
      <p><span data-start="00:36:27.460" data-end="00:36:30.690" data-start-seconds="2187">And I kind of left that</span> <span data-start="00:36:27.460" data-end="00:36:30.690" data-start-seconds="2187">optimization til the end.</span></p>
      <p><span data-start="00:36:30.690" data-end="00:36:32.760" data-start-seconds="2190">And you should just really</span> <span data-start="00:36:30.690" data-end="00:36:32.760" data-start-seconds="2190">include it by default.</span></p>
      <p><span data-start="00:36:32.760" data-end="00:36:35.520" data-start-seconds="2192">That actually reduced page</span> <span data-start="00:36:32.760" data-end="00:36:35.520" data-start-seconds="2192">load time significantly.</span></p>
      <p><span data-start="00:36:38.520" data-end="00:36:45.210" data-start-seconds="2198">Um, the-- you showed a bit of</span> <span data-start="00:36:38.520" data-end="00:36:45.210" data-start-seconds="2198">the developer tools in Chrome.</span></p>
      <p><span data-start="00:36:45.210" data-end="00:36:46.770" data-start-seconds="2205">And I happen to work on them.</span></p>
      <p><span data-start="00:36:46.770" data-end="00:36:49.370" data-start-seconds="2206">So that's-- that's OK, I guess.</span></p>
      <p><span data-start="00:36:49.370" data-end="00:36:54.814" data-start-seconds="2209">But there is a question</span> <span data-start="00:36:49.370" data-end="00:36:54.814" data-start-seconds="2209">of, like, what--</span> <span data-start="00:36:54.814" data-end="00:36:56.315" data-start-seconds="2214">what is-- what is</span> <span data-start="00:36:54.814" data-end="00:36:56.315" data-start-seconds="2214">the story-- what</span> <span data-start="00:36:56.315" data-end="00:36:57.950" data-start-seconds="2216">does the cross-browser</span> <span data-start="00:36:56.315" data-end="00:36:57.950" data-start-seconds="2216">story look like?</span> <span data-start="00:36:57.950" data-end="00:37:02.779" data-start-seconds="2217">So are there other tools on--</span> <span data-start="00:36:57.950" data-end="00:37:02.779" data-start-seconds="2217">available for other browsers</span> <span data-start="00:37:02.779" data-end="00:37:03.820" data-start-seconds="2222">for some of these things?</span> <span data-start="00:37:03.820" data-end="00:37:06.450" data-start-seconds="2223">I-- I believe IE</span> <span data-start="00:37:03.820" data-end="00:37:06.450" data-start-seconds="2223">has a set of tools.</span></p>
      <p><span data-start="00:37:06.450" data-end="00:37:08.354" data-start-seconds="2226">I've never actually</span> <span data-start="00:37:06.450" data-end="00:37:08.354" data-start-seconds="2226">used them though.</span></p>
      <p><span data-start="00:37:08.354" data-end="00:37:13.322" data-start-seconds="2228">Um, presumably, if</span> <span data-start="00:37:08.354" data-end="00:37:13.322" data-start-seconds="2228">you optimize for V8,</span> <span data-start="00:37:13.322" data-end="00:37:15.530" data-start-seconds="2233">you're going to be optimizing</span> <span data-start="00:37:13.322" data-end="00:37:15.530" data-start-seconds="2233">for a lot of JavaScript</span> <span data-start="00:37:15.530" data-end="00:37:17.770" data-start-seconds="2235">engines.</span></p>
      <p><span data-start="00:37:17.770" data-end="00:37:20.877" data-start-seconds="2237">But to be honest, I don't</span> <span data-start="00:37:17.770" data-end="00:37:20.877" data-start-seconds="2237">have a good answer for that.</span></p>
      <p><span data-start="00:37:20.877" data-end="00:37:26.820" data-start-seconds="2240">Um, we might-- we might get</span> <span data-start="00:37:20.877" data-end="00:37:26.820" data-start-seconds="2240">into this when Paul talks, too.</span></p>
      <p><span data-start="00:37:26.820" data-end="00:37:28.370" data-start-seconds="2246">Perfect.</span></p>
      <p><span data-start="00:37:28.370" data-end="00:37:29.190" data-start-seconds="2248">We will?</span> <span data-start="00:37:29.190" data-end="00:37:30.010" data-start-seconds="2249">OK.</span></p>
      <p><span data-start="00:37:30.010" data-end="00:37:31.468" data-start-seconds="2250">We will.</span></p>
      <p><span data-start="00:37:31.468" data-end="00:37:33.940" data-start-seconds="2251">Um, it's a good topic.</span></p>
      <p><span data-start="00:37:33.940" data-end="00:37:35.445" data-start-seconds="2253">And so I think</span> <span data-start="00:37:33.940" data-end="00:37:35.445" data-start-seconds="2253">we'll-- we'll hit it.</span></p>
      <p><span data-start="00:37:38.180" data-end="00:37:42.970" data-start-seconds="2258">One of the things-- what</span> <span data-start="00:37:38.180" data-end="00:37:42.970" data-start-seconds="2258">is your preferred technique</span> <span data-start="00:37:42.970" data-end="00:37:48.250" data-start-seconds="2262">for optimizing page load when</span> <span data-start="00:37:42.970" data-end="00:37:48.250" data-start-seconds="2262">it comes to dealing with images?</span> <span data-start="00:37:48.250" data-end="00:37:51.200" data-start-seconds="2268">Um, basically making sure</span> <span data-start="00:37:48.250" data-end="00:37:51.200" data-start-seconds="2268">they're as small as possible,</span> <span data-start="00:37:51.200" data-end="00:37:53.880" data-start-seconds="2271">compress them, resize</span> <span data-start="00:37:51.200" data-end="00:37:53.880" data-start-seconds="2271">them to the actual size</span> <span data-start="00:37:53.880" data-end="00:37:55.456" data-start-seconds="2273">they are on the page.</span></p>
      <p><span data-start="00:37:55.456" data-end="00:37:59.802" data-start-seconds="2275">Um, that's the kind of</span> <span data-start="00:37:55.456" data-end="00:37:59.802" data-start-seconds="2275">bulk standard things.</span></p>
      <p><span data-start="00:37:59.802" data-end="00:38:01.490" data-start-seconds="2279">Progressive JPEG?</span> <span data-start="00:38:01.490" data-end="00:38:02.812" data-start-seconds="2281">Yes.</span></p>
      <p><span data-start="00:38:02.812" data-end="00:38:03.520" data-start-seconds="2282">Progressive JPEG.</span></p>
      <p><span data-start="00:38:03.520" data-end="00:38:07.127" data-start-seconds="2283">Um, you just have to</span> <span data-start="00:38:03.520" data-end="00:38:07.127" data-start-seconds="2283">get your-- it's a-- it's</span> <span data-start="00:38:07.127" data-end="00:38:09.810" data-start-seconds="2287">a server supported thing.</span></p>
      <p><span data-start="00:38:09.810" data-end="00:38:12.724" data-start-seconds="2289">You have to make sure your</span> <span data-start="00:38:09.810" data-end="00:38:12.724" data-start-seconds="2289">server supports it, right?</span> <span data-start="00:38:12.724" data-end="00:38:13.640" data-start-seconds="2292">Not with progressive.</span></p>
      <p><span data-start="00:38:13.640" data-end="00:38:14.140" data-start-seconds="2293">OK.</span></p>
      <p><span data-start="00:38:14.140" data-end="00:38:14.648" data-start-seconds="2294">No.</span></p>
      <p><span data-start="00:38:14.648" data-end="00:38:18.770" data-start-seconds="2294">Um, it's fine as far</span> <span data-start="00:38:14.648" data-end="00:38:18.770" data-start-seconds="2294">as the serving aspect.</span></p>
      <p><span data-start="00:38:18.770" data-end="00:38:20.909" data-start-seconds="2298">But, um, yeah.</span></p>
      <p><span data-start="00:38:20.909" data-end="00:38:21.450" data-start-seconds="2300">[INAUDIBLE].</span></p>
      <p><span data-start="00:38:21.450" data-end="00:38:23.460" data-start-seconds="2301">We'll have a perceived</span> <span data-start="00:38:21.450" data-end="00:38:23.460" data-start-seconds="2301">user benefit at least--</span> <span data-start="00:38:23.460" data-end="00:38:24.150" data-start-seconds="2303">Yeah.</span></p>
      <p><span data-start="00:38:24.150" data-end="00:38:25.510" data-start-seconds="2304">---is the idea.</span></p>
      <p><span data-start="00:38:25.510" data-end="00:38:29.010" data-start-seconds="2305">Um, cool.</span></p>
      <p><span data-start="00:38:29.010" data-end="00:38:34.470" data-start-seconds="2309">And, um, what is-- have</span> <span data-start="00:38:29.010" data-end="00:38:34.470" data-start-seconds="2309">you done something--</span> <span data-start="00:38:34.470" data-end="00:38:37.974" data-start-seconds="2314">so you used-- you showed</span> <span data-start="00:38:34.470" data-end="00:38:37.974" data-start-seconds="2314">the PageSpeed Insights API.</span></p>
      <p><span data-start="00:38:37.974" data-end="00:38:40.240" data-start-seconds="2317">Have you built</span> <span data-start="00:38:37.974" data-end="00:38:40.240" data-start-seconds="2317">anything-- I'm basically</span> <span data-start="00:38:40.240" data-end="00:38:43.800" data-start-seconds="2320">cli-- curious around,</span> <span data-start="00:38:40.240" data-end="00:38:43.800" data-start-seconds="2320">like, have you took-- taken</span> <span data-start="00:38:43.800" data-end="00:38:46.420" data-start-seconds="2323">a look at over the</span> <span data-start="00:38:43.800" data-end="00:38:46.420" data-start-seconds="2323">lifetime of your projects</span> <span data-start="00:38:46.420" data-end="00:38:49.380" data-start-seconds="2326">and kind of tracked</span> <span data-start="00:38:46.420" data-end="00:38:49.380" data-start-seconds="2326">the performance over,</span> <span data-start="00:38:49.380" data-end="00:38:53.340" data-start-seconds="2329">like, weeks and months and being</span> <span data-start="00:38:49.380" data-end="00:38:53.340" data-start-seconds="2329">able to kind of see, perhaps,</span> <span data-start="00:38:53.340" data-end="00:38:55.580" data-start-seconds="2333">like, you regressed</span> <span data-start="00:38:53.340" data-end="00:38:55.580" data-start-seconds="2333">performance somewhere.</span></p>
      <p><span data-start="00:38:55.580" data-end="00:38:57.111" data-start-seconds="2335">So actually, I've</span> <span data-start="00:38:55.580" data-end="00:38:57.111" data-start-seconds="2335">just added that.</span></p>
      <p><span data-start="00:38:57.111" data-end="00:38:57.985" data-start-seconds="2337">So unfortunately, no.</span></p>
      <p><span data-start="00:38:57.985" data-end="00:38:59.120" data-start-seconds="2337">I don't have that data.</span></p>
      <p><span data-start="00:38:59.120" data-end="00:39:01.501" data-start-seconds="2339">But it would be kind</span> <span data-start="00:38:59.120" data-end="00:39:01.501" data-start-seconds="2339">of a cool web service.</span></p>
      <p><span data-start="00:39:01.501" data-end="00:39:03.000" data-start-seconds="2341">I was thinking just</span> <span data-start="00:39:01.501" data-end="00:39:03.000" data-start-seconds="2341">putting together</span> <span data-start="00:39:03.000" data-end="00:39:05.840" data-start-seconds="2343">a little Heroku app that you</span> <span data-start="00:39:03.000" data-end="00:39:05.840" data-start-seconds="2343">could ping whenever you deploy.</span></p>
      <p><span data-start="00:39:05.840" data-end="00:39:07.985" data-start-seconds="2345">And it would show you</span> <span data-start="00:39:05.840" data-end="00:39:07.985" data-start-seconds="2345">a graph over time.</span></p>
      <p><span data-start="00:39:07.985" data-end="00:39:09.360" data-start-seconds="2347">Because it's</span> <span data-start="00:39:07.985" data-end="00:39:09.360" data-start-seconds="2347">definitely something</span> <span data-start="00:39:09.360" data-end="00:39:10.545" data-start-seconds="2349">you want to keep an eye on.</span></p>
      <p><span data-start="00:39:10.545" data-end="00:39:11.045" data-start-seconds="2350">Yeah.</span></p>
      <p><span data-start="00:39:11.045" data-end="00:39:11.914" data-start-seconds="2351">Yeah, absolutely.</span></p>
      <p><span data-start="00:39:11.914" data-end="00:39:12.580" data-start-seconds="2351">All right, cool.</span></p>
      <p><span data-start="00:39:12.580" data-end="00:39:13.065" data-start-seconds="2352">Well, thank you very much--</span> <span data-start="00:39:13.065" data-end="00:39:13.470" data-start-seconds="2353">Thanks so much.</span></p>
      <p><span data-start="00:39:13.470" data-end="00:39:14.000" data-start-seconds="2353">---Alex.</span></p>
      <p><span data-start="00:39:14.000" data-end="00:39:15.550" data-start-seconds="2354">Thanks.</span></p>
     </div>
     <ul class="post options">
      <li><a href="#comments" id="goto-comments"><strong>0</strong> comments</a></li>
      <li><a href="#comment" id="goto-comment">Comment</a></li>
     </ul>
     <form method="post" action="/congres/2013/sessions/faster-javascript.md" id="comment">
      <fieldset>
       <legend>Post a comment</legend>
       <p>
        <label for="comment-name">Name</label>
        <input type="text" class="text" name="comment-name" required id="comment-name">
       </p>
       <p>
        <label for="comment-mail">E-mail <em>not displayed</em></label>
        <input type="email" class="text email" name="comment-mail" required id="comment-mail">
       </p>
       <p>
        <label for="comment-site">Website</label>
        <input type="url" class="text email" name="comment-site" id="comment-site">
       </p>
       <p>
        <label for="comment-text">Comment <em>HTML not allowed, <a href="/blog/markup" title="Markup for comments">simple markup</a> is</em></label>
        <textarea rows="5" cols="50" name="comment-text" required id="comment-text"></textarea>
       </p>
       <p>
        <label for="comment-spam">Spammer? <em>Fill in 'no'</em></label>
        <input type="text" class="text spam-check" name="comment-spam" id="comment-spam">
       </p>
       <p class="submit">
        <input type="submit" name="submit" value="Add" class="submit">
       </p>
      </fieldset>
     </form>
    </div>
   </div>
   <div id="submenu">
    <div>
     <form method="get" action="//www.google.com/search" lang="en">
      <h2><label for="q">Search fronteers.nl</label></h2>
      <p>
       <input name="q" id="q" type="search">
       <input type="hidden" name="sitesearch" value="fronteers.nl">
       <input type="hidden" name="ie" value="UTF-8">
       <input type="hidden" name="oe" value="UTF-8">
       <input type="hidden" name="hl" value="en">
      </p>
     </form>
    </div>
    <div id="conference-menu" lang="en">
     <h2>Fronteers 2013</h2>
     <ul>
      <li><a href="/congres/2013/news" title="Fronteers 2013 news">News</a></li>
      <li><a href="/congres/2013/venue" title="Fronteers 2013 venue">Venue</a></li>
      <li><a href="/congres/2013/schedule" title="Fronteers 2013 schedule">Schedule</a></li>
      <li><a href="/congres/2013/speakers" title="Fronteers 2013 speakers">Speakers</a></li>
      <li class="current"><a href="/congres/2013/sessions" title="Fronteers 2013 sessions" class="current">Sessions</a></li>
      <li><a href="/congres/2013/workshops" title="Fronteers 2013 workshops">Workshops</a></li>
      <li><a href="/congres/2013/jam-session" title="Fronteers 2013 Jam Session">Jam Session</a></li>
      <li><a href="/congres/2013/tickets" title="Fronteers 2013 tickets">Tickets</a></li>
      <li><a href="/congres/2013/attendees" title="Fronteers 2013 attendees">Attendees</a></li>
      <li><a href="/congres/2013/colophon" title="Fronteers 2013 colophon">Colophon</a></li>
      <li><a href="/congres/2013/contact" title="Fronteers 2013 contact information">Contact information</a></li>
     </ul>
    </div>
    <div lang="en">
     <h2>Elsewhere</h2>
     <ul>
      <li><a href="https://twitter.com/FronteersConf">Twitter</a></li>
      <li><a href="http://lanyrd.com/2013/fronteers/">Lanyrd</a></li>
      <li><a href="https://vimeo.com/fronteers/videos">Vimeo</a></li>
      <li><a href="https://itunes.apple.com/nl/podcast/fronteers-videos/id1136212068?l=en">Podcast on iTunes</a></li>
      <li><a href="http://webchat.freenode.net/?channels=fronteers">IRC</a></li>
     </ul>
    </div>
    <div lang="en">
     <h2>Fronteers</h2>
     <ul>
      <li><a href="/about">About Fronteers</a></li>
     </ul>
    </div>
    <div id="feeds" lang="en">
     <h2>Stay updated</h2>
     <ul>
      <li><a href="https://twitter.com/FronteersConf">Twitter</a></li>
      <li><a href="https://feeds.feedburner.com/FronteersCongres" type="application/rss+xml">RSS</a></li>
     </ul>
    </div>
   </div>
   <ul id="menu">
    <li id="menu-home"><a href="/">Home</a></li>
    <li id="menu-vereniging"><a href="/vereniging">Vereniging</a></li>
    <li id="menu-leden"><a href="/leden">Ledenlijst</a></li>
    <li id="menu-inschrijven"><a href="/inschrijven">Lid worden</a></li>
    <li id="menu-sign-up"><a href="/sign-up">Fronteers membership</a></li>
    <li id="menu-blog"><a href="/blog">Nieuws</a></li>
    <li id="menu-nieuwsbrief"><a href="/nieuwsbrief">Nieuwsbrief</a></li>
    <li id="menu-community"><a href="/community">Community</a></li>
    <li id="menu-bijeenkomsten"><a href="/bijeenkomsten">Bijeenkomsten</a></li>
    <li id="menu-workshops"><a href="/workshops">Workshops</a></li>
    <li id="menu-contact"><a href="/contact">Contact</a></li>
    <li id="menu-congres"><a href="/congres">Conference</a>
     <ul>
      <li><a href="/congres/2019">FronteersConf 2019</a></li>
      <li><a href="/congres/2018">FronteersConf 2018</a></li>
      <li><a href="/congres/2017">FronteersConf 2017</a></li>
      <li><a href="/congres/2016-spring">Spring Conf 2016</a></li>
      <li><a href="/congres/2016">FronteersConf 2016</a></li>
      <li><a href="/congres/2015">FronteersConf 2015</a></li>
      <li><a href="/congres/2014">Fronteers 2014</a></li>
      <li class="current"><a href="/congres/2013" class="current">Fronteers 2013</a></li>
      <li><a href="/congres/2012">Fronteers 2012</a></li>
      <li><a href="/congres/2011">Fronteers 2011</a></li>
      <li><a href="/congres/2010">Fronteers 2010</a></li>
      <li><a href="/congres/2009">Fronteers 2009</a></li>
      <li><a href="/congres/2008">Fronteers 2008</a></li>
     </ul>
    </li>
    <li id="menu-vacaturebank"><a href="/vacaturebank">Vacaturebank</a></li>
    <li id="menu-communityondersteuning"><a href="/communityondersteuning">Ondersteuning</a></li>
    <li id="menu-videos"><a href="/videos">Video's</a></li>
    <li id="menu-kalender"><a href="/kalender">Kalender</a></li>
    <li id="menu-forum"><a href="https://forum.fronteers.nl/">Forum</a></li>
   </ul>
  </div>
  <script>
   (function() {
    "use strict";
    var i, j, tellCSS;
    var antiSpamElements = document.querySelectorAll && document.querySelectorAll('.spam-check');
    if (antiSpamElements) {
     for (i = 0; i < antiSpamElements.length; i++) {
      antiSpamElements[i].value = 'Nee';
      antiSpamElements[i].parentNode.style.display = 'none';
     }
    }
    var transcript = document.querySelector && document.querySelector('.transcript'), video = document.querySelector && document.querySelector('video');
    if (transcript && video) {
     transcript.onclick = function(e) {
      if (e && e.target && e.target.getAttribute('data-start-seconds')) {
       video.currentTime = e.target.getAttribute('data-start-seconds') - 1;
      }
     };
     if (transcript.previousElementSibling && transcript.previousElementSibling.tagName.toLowerCase() == 'h3') {
      transcript.previousElementSibling.appendChild(document.createTextNode(' (click to jump to that part in the video)'));
     }
     tellCSS = true;
    }
    var lis = document.querySelectorAll && document.querySelectorAll('li.current');
    if (lis) {
     var markers = [];
     for (i = 0; i < lis.length; i++) {
      var li = lis[i], ul = li.parentNode, top = li.offsetTop;
      if (ul.parentNode.tagName.toLowerCase() == 'li') {
       ul = ul.parentNode.parentNode;
      }
      var marker = document.createElement('li'), as = ul.querySelectorAll('a'), a;
      markers.push({
       top: top,
       marker: marker,
       mark: function(element) {
        this.marker.style.webkitTransform = this.marker.style.mozTransform = this.marker.style.msTransform = this.marker.style.transform = 'translateY(' + (element.offsetTop - this.top) + 'px)';
       },
       unmark: function() {
        this.marker.style.webkitTransform = this.marker.style.mozTransform = this.marker.style.msTransform = this.marker.style.transform = 'translateY(0)';
       }
      });
      for (j = 0; j < as.length; j++) {
       a = as[j];
       a.setAttribute('marker', i);
       a.onmouseover = a.onfocus = function() {
        markers[this.getAttribute('marker')].mark(this.parentNode);
       };
       a.onmouseout = a.onblur = function() {
        markers[this.getAttribute('marker')].unmark();
       };
       a.onclick = function() {
        markers[this.getAttribute('marker')].unmark = function(){};
       }
      }
      marker.innerHTML = '<span>​</span>';
      marker.className = 'mark';
      marker.style.top = top + 'px';
      ul.appendChild(marker);
     }
     tellCSS = true;
    }
    if (tellCSS) {
     document.documentElement.className = 'js-enabled';
    }
   })();
  </script>
 </body>
</html>
